<?xml-stylesheet href="/rss.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>æ˜Ÿæ²³é¹­èµ·</title><link>https://ngtrio.com/</link><description>Recent content on æ˜Ÿæ²³é¹­èµ·</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</copyright><lastBuildDate>Tue, 01 Oct 2024 18:48:19 +0800</lastBuildDate><atom:link href="https://ngtrio.com/index.xml" rel="self" type="application/rss+xml"/><item><title>æ­£ç¡®çš„ç†è´¢</title><link>https://ngtrio.com/posts/%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%90%86%E8%B4%A2/</link><pubDate>Tue, 01 Oct 2024 18:48:19 +0800</pubDate><guid>https://ngtrio.com/posts/%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%90%86%E8%B4%A2/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%90%86%E8%B4%A2/ -&lt;p>24å¹´å›½åº†ï¼Œæ­£å¥½æ˜¯å·¥ä½œå››å¹´å‡ºå¤´ï¼Œåˆ©ç”¨ç©ºé—²æ—¶é—´å›é¡¾äº†è¿™å››å¹´ä»¥æ¥ä¸ªäººçš„å¼€é”€å’Œç§¯è“„ï¼ŒèŠ±çš„é’±éƒ½è¿˜ç®—æœ‰ä»·å€¼ï¼Œè¯¥æ”’çš„ä¹Ÿæœ‰è®¤çœŸåœ¨æ”’ï¼Œæ•´ä½“æ¯”è¾ƒå¥åº·ã€‚&lt;/p>
&lt;p>ä¸è¿‡åœ¨è¿‘æœŸAè‚¡å¤§æ¶¨çš„èƒŒæ™¯ä¸‹ï¼Œç†è´¢è¿™æ–¹é¢å®åœ¨æ˜¯ç›¸å½¢è§ç»Œã€‚ä»19å¹´å¼€å§‹ä¹°å…¥åŸºé‡‘ï¼Œå†åˆ°ä»Šå¹´å¼€é€šè¯åˆ¸è´¦æˆ·ï¼Œè™½å‰å‰ååæœ‰äº”å¹´ä¹‹ä¹…ï¼Œä½†ä»æ²¡èŠ±ç²¾åŠ›å»åŸ¹å…»æœ‰å…³æ€ç»´ã€å­¦ä¹ ç†è®ºåŸºç¡€ï¼Œæ¯ä¸€æ¬¡ä¹°å…¥å’Œå–å‡ºå®é™…éƒ½å……æ»¡èµŒçš„æˆåˆ†ï¼ŒèŠ±äº†æ—¶é—´ä¹ŸèŠ±äº†ç²¾åŠ›ã€‚ç±»ä¼¼çŠ¶æ€çš„äººåœ¨å‘¨å›´å…¶å®æœ‰å¾ˆå¤šï¼Œ20å¹´å·¦å³æ¯•ä¸šçš„åº”å±Šï¼Œå› ä¸ºå·¥ä½œç»™äºˆäº†äººç”Ÿç¬¬ä¸€ç¬”å¯ä»¥è‡ªä¸»æ”¯é…çš„é’±ï¼ŒåŠ ä¸Šä¼´éšä¸Šæ¼”çš„åŸºé‡‘æ½®ï¼Œéƒ½çº·çº·å¸¦ç€åˆšè¿›ç¤¾ä¼šçš„å‹‡æ°”buffå°±ä¸‹åœºäº†ã€‚&lt;/p>
&lt;p>åŠ ä¸Šè´§å¸é€æ¸æ•°å­—åŒ–ï¼Œçº¸å¸ç»™äººçš„åˆ†é‡æ„Ÿæ¸æ¸ç¼ºå¤±ï¼Œé£é™©æ„è¯†å…¶å®è¶Šæ¥è¶Šæ·¡è–„ï¼Œè´¦æˆ·ä¸Šä¸€ä¸ªç®€å•çš„äº”ä½æ•°å­—&lt;code>10000&lt;/code>ï¼Œæ‹¿åœ¨æ‰‹ä¸­å®é™…ä¸Šæ˜¯&lt;code>100&lt;/code>å¼ çº¢è‰²çš„ç™¾å…ƒå¤§é’ã€‚å›æƒ³å½“å¹´åœ°é“ä¸Šä¸ç»æ„çœ‹åˆ°æ—è¾¹æ‰‹æœºåä¸‡ä½™é¢çš„åŸºé‡‘è´¦æˆ·ï¼Œå¿ƒé‡Œè¿˜ä¼šé»˜é»˜ä½©æœè¿™ä½é™Œç”Ÿäººçš„èƒ†è¯†ï¼Œç°åœ¨å†å»æƒ³æƒ³å€’ä¹Ÿè§‰å¾—å¯»å¸¸ï¼Œè¿™ç§åœ¨å®é™…æŠ•èµ„æ°´å¹³æ²¡æœ‰è¿›æ­¥çš„æƒ…å†µä¸‹ï¼Œé€æ­¥å¯¹é£é™©å˜å¾—éº»æœ¨çš„å¿ƒç†å˜åŒ–ï¼Œå…¶å®æ˜¯å¾ˆææ€–çš„ã€‚&lt;/p>
&lt;p>ä¸è¿‡ä¸èƒ½å¦è®¤è‡ªå·±ç”¨é€‚å½“é£é™©å»åšå–é¢å¤–æ”¶ç›Šçš„æ„è¯†ï¼Œä½†å¾—æ˜ç™½å®ƒæœ‰è®¤çŸ¥é—¨æ§›ï¼Œèµšè®¤çŸ¥å¤–çš„é’±å¾ˆéš¾ï¼Œä½†å¯ä»¥èŠ±æ—¶é—´å»æ„å»ºè®¤çŸ¥ï¼Œè®¸å¤šäººæ¨èå…ˆä»ã€Šç©·çˆ¸çˆ¸å¯Œçˆ¸çˆ¸ã€‹ã€Šå°ç‹—é’±é’±ã€‹å»æ„å»ºç†è´¢è§‚å¿µï¼Œé‚£ä¹ˆå°±ä»è¿™ä¸¤æœ¬ä¹¦å¼€å§‹å§ã€‚&lt;/p>
- https://ngtrio.com/posts/%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%90%86%E8%B4%A2/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>Go Generics</title><link>https://ngtrio.com/posts/go-genric/</link><pubDate>Sun, 17 Apr 2022 23:09:41 +0800</pubDate><guid>https://ngtrio.com/posts/go-genric/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/go-genric/ -&lt;p>&lt;img src="images/2022-04-17-15-22-16.png" alt="">&lt;/p>
&lt;ul>
&lt;li>Generics&lt;/li>
&lt;li>Fuzzing&lt;/li>
&lt;li>Workspaces&lt;/li>
&lt;li>20% Performance Improvements&lt;/li>
&lt;/ul>
&lt;p>æœ¬æ–‡æ˜¯å¯¹Go1.18çš„ç¬¬ä¸€ä¸ªç‰¹æ€§ï¼šæ³›å‹ï¼ˆGenericsï¼‰åšçš„ä¸€äº›ä½“éªŒæ€»ç»“ã€‚&lt;/p>
&lt;h2 id="ä»å¸¸è§çš„åœºæ™¯è¯´èµ·">ä»å¸¸è§çš„åœºæ™¯è¯´èµ·&lt;/h2>
&lt;h3 id="å¯¹æŒ‡é’ˆç±»å‹è¿›è¡Œè§£å¼•ç”¨">å¯¹æŒ‡é’ˆç±»å‹è¿›è¡Œè§£å¼•ç”¨&lt;/h3>
&lt;p>ä¸€èˆ¬æˆ‘ä»¬ä¼šåƒä¸‹é¢è¿™æ ·å¯¹ä¸åŒçš„ç±»å‹åˆ†åˆ«å®ç°å¯¹åº”çš„è§£å¼•ç”¨å‡½æ•°ï¼ˆä¸ä½¿ç”¨åå°„çš„æƒ…å†µä¸‹ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">PtrToString&lt;/span>(strPtr *&lt;span style="color:#00688b;font-weight:bold">string&lt;/span>) &lt;span style="color:#00688b;font-weight:bold">string&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> strPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#cd5555">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *strPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">PtrToInt&lt;/span>(intPtr *&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>) &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> intPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#b452cd">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *intPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">PtrToBool&lt;/span>(boolPtr *&lt;span style="color:#00688b;font-weight:bold">bool&lt;/span>) &lt;span style="color:#00688b;font-weight:bold">bool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> boolPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#8b008b;font-weight:bold">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *boolPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¯æ–°å¢ä¸€ä¸ªç±»å‹æˆ‘ä»¬å°±éœ€è¦é’ˆå¯¹è¿™ä¸ªç±»å‹å®ç°ä¸€æ®µç±»ä¼¼é‡å¤çš„ä»£ç ï¼Œä½†è¿™äº›å‡½æ•°çš„å”¯ä¸€ä¸åŒç‚¹ï¼Œ&lt;strong>å®é™…ä¸Šåªæœ‰å‡½æ•°å‚æ•°çš„ç±»å‹å’Œå‡½æ•°å“åº”å€¼çš„ç±»å‹ä¸åŒ&lt;/strong>ã€‚&lt;/p>
&lt;p>è€Œ &lt;strong>æ³›å‹(Generics)&lt;/strong> å°±æ˜¯ç»™å˜é‡çš„ç±»å‹ä¹Ÿå¼•å…¥â€œå½¢å‚&amp;amp;å®å‚â€çš„æ¦‚å¿µã€‚æˆ‘ä»¬å®šä¹‰å‡½æ•°çš„æ—¶å€™å¯ä»¥ç»™å‚æ•°ç±»å‹å®šä¹‰â€œç±»å‹å½¢å‚â€ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡½æ•°ä¼ å…¥ç±»å‹çš„å®å‚ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ³›å‹ï¼Œä¸Šè¿°çš„ä»£ç å®ç°å¯ä»¥è½¬å˜ä¸ºä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22">// å®šä¹‰è§£å¼•ç”¨å‡½æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> FromPtr[T &lt;span style="color:#00688b;font-weight:bold">any&lt;/span>](anyPtr *T) T {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> zero T
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> anyPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> zero
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *anyPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äºä¸åŒçš„ç±»å‹ï¼Œæˆ‘ä»¬éƒ½åªéœ€è¦è°ƒç”¨è¿™ä¸€ä¸ª&lt;code>æ³›å‹å‡½æ•°&lt;/code>å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22">// è°ƒç”¨è§£å¼•ç”¨å‡½æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> intPtr *&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> strPtr *&lt;span style="color:#00688b;font-weight:bold">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> boolPtr *&lt;span style="color:#00688b;font-weight:bold">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a := &lt;span style="color:#b452cd">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b := &lt;span style="color:#cd5555">&amp;#34;str&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> c := &lt;span style="color:#8b008b;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#228b22">// ç±»å‹å®å‚è‡ªåŠ¨æ¨æ–­ï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬åƒä¸‹é¢è¿™æ ·æ‰‹åŠ¨ä¼ å…¥äº†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#228b22">// fmt.Println(FromPtr[int](intPtr))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#008b45">Println&lt;/span>(&lt;span style="color:#008b45">FromPtr&lt;/span>(intPtr)) &lt;span style="color:#228b22">// 0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#008b45">Println&lt;/span>(&lt;span style="color:#008b45">FromPtr&lt;/span>(strPtr)) &lt;span style="color:#228b22">// &amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#008b45">Println&lt;/span>(&lt;span style="color:#008b45">FromPtr&lt;/span>(boolPtr)) &lt;span style="color:#228b22">// false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#008b45">Println&lt;/span>(&lt;span style="color:#008b45">FromPtr&lt;/span>(&amp;amp;a)) &lt;span style="color:#228b22">// 1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#008b45">Println&lt;/span>(&lt;span style="color:#008b45">FromPtr&lt;/span>(&amp;amp;b)) &lt;span style="color:#228b22">// str&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#008b45">Println&lt;/span>(&lt;span style="color:#008b45">FromPtr&lt;/span>(&amp;amp;c)) &lt;span style="color:#228b22">// true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è‡ªå®šä¹‰å®¹å™¨">è‡ªå®šä¹‰å®¹å™¨&lt;/h3>
&lt;p>å‡è®¾æˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªèƒ½å¤Ÿåšå…ƒç´ ç´¯åŠ çš„å®¹å™¨&lt;br>
ä»¥å¾€æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªåŸºç¡€ç±»å‹åˆ†åˆ«å®šä¹‰ä¸€ä¸ªå®¹å™¨ï¼Œå¹¶ç›¸åº”å®ç°å¯¹åº”çš„ç´¯åŠ æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntSlice []&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> StrSlice []&lt;span style="color:#00688b;font-weight:bold">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span>(s IntSlice) &lt;span style="color:#008b45">AddAll&lt;/span>() &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> {&lt;span style="color:#228b22">/*çœç•¥*/&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span>(s StrSlice) &lt;span style="color:#008b45">AddAll&lt;/span>() &lt;span style="color:#00688b;font-weight:bold">string&lt;/span> {&lt;span style="color:#228b22">/*çœç•¥*/&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“æœ‰äº†æ³›å‹ç‰¹æ€§ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ª&lt;code>æ³›å‹ç±»å‹&lt;/code>, ç„¶åå®ç°ç´¯åŠ çš„&lt;code>æ³›å‹æ–¹æ³•&lt;/code>å³å¯:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> AnySlice[T &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">string&lt;/span>] []T
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> (s AnySlice[T]) &lt;span style="color:#008b45">AddAll&lt;/span>() T {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> ret T
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">for&lt;/span> _, elem := &lt;span style="color:#8b008b;font-weight:bold">range&lt;/span> s {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> ret += elem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> ret
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®šä¹‰å¥½çš„&lt;code>æ³›å‹ç±»å‹&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>intSlice := AnySlice[&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>]{&lt;span style="color:#b452cd">1&lt;/span>, &lt;span style="color:#b452cd">2&lt;/span>, &lt;span style="color:#b452cd">3&lt;/span>, &lt;span style="color:#b452cd">4&lt;/span>, &lt;span style="color:#b452cd">5&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>strSlice := AnySlice[&lt;span style="color:#00688b;font-weight:bold">string&lt;/span>]{&lt;span style="color:#cd5555">&amp;#34;str1&amp;#34;&lt;/span>, &lt;span style="color:#cd5555">&amp;#34;str2&amp;#34;&lt;/span>, &lt;span style="color:#cd5555">&amp;#34;str3&amp;#34;&lt;/span>, &lt;span style="color:#cd5555">&amp;#34;str4&amp;#34;&lt;/span>, &lt;span style="color:#cd5555">&amp;#34;str5&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#008b45">Println&lt;/span>(intSlice.&lt;span style="color:#008b45">AddAll&lt;/span>()) &lt;span style="color:#228b22">// 15&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>fmt.&lt;span style="color:#008b45">Println&lt;/span>(strSlice.&lt;span style="color:#008b45">AddAll&lt;/span>()) &lt;span style="color:#228b22">// str1str2str3str4str5&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ&lt;/h2>
&lt;p>æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„æ³›å‹å‡½æ•°å¼•å…¥ä¸€äº›åŸºæœ¬æ¦‚å¿µ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> ç±»å‹å‚æ•°åˆ—è¡¨ ç±»å‹çº¦æŸ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> FromPtr[T &lt;span style="color:#00688b;font-weight:bold">any&lt;/span>](anyPtr *T) T - æ³›å‹å‡½æ•°
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a61717;background-color:#e3d2d2">\&lt;/span> /_/
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#a61717;background-color:#e3d2d2">\&lt;/span> ç±»å‹å½¢å‚ /
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ç±»å‹å®å‚
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FromPtr[&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>](intPtr) - æ³›å‹å‡½æ•°è°ƒç”¨
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ç±»å‹å‚æ•°åˆ—è¡¨ ç±»å‹çº¦æŸ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> | ------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> AnySlice[T &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">string&lt;/span>] []T - æ³›å‹ç±»å‹
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a61717;background-color:#e3d2d2">\&lt;/span> /
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a61717;background-color:#e3d2d2">\&lt;/span> ç±»å‹å½¢å‚ /
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> æ³›å‹æ¥æ”¶å™¨
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> (s AnySlice[T]) &lt;span style="color:#008b45">AddAll&lt;/span>() T - æ³›å‹æ–¹æ³•
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ç±»å‹å®å‚
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>AnySlice[&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>]{&lt;span style="color:#b452cd">1&lt;/span>, &lt;span style="color:#b452cd">2&lt;/span>, &lt;span style="color:#b452cd">3&lt;/span>, &lt;span style="color:#b452cd">4&lt;/span>, &lt;span style="color:#b452cd">5&lt;/span>} - æ³›å‹ç±»å‹å®ä¾‹åŒ–
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Goæ³›å‹çš„å¤§éƒ¨åˆ†åŸºæœ¬æ¦‚å¿µå…¶å®å’Œå…¶ä»–æ‹¥æœ‰æ³›å‹ç‰¹æ€§çš„è¯­è¨€åŸºæœ¬ç±»ä¼¼ï¼Œå°±ä¸å†è¿‡å¤šèµ˜è¿°ï¼Œä¸‹é¢é’ˆå¯¹ä¸å¤ªä¸€æ ·çš„ç±»å‹çº¦æŸåšä¸€äº›ä»‹ç»ã€‚&lt;/p>
&lt;h2 id="ç±»å‹çº¦æŸtype-constraint">ç±»å‹çº¦æŸ(type constraint)&lt;/h2>
&lt;p>äº†è§£ç±»å‹çº¦æŸçš„æœºåˆ¶ï¼Œæˆ‘ä»¬æ‰èƒ½æ˜ç™½ä»€ä¹ˆæ ·çš„ç±»å‹æ‰èƒ½å®ä¾‹åŒ–æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ã€‚&lt;br>
Goè¯­è¨€æœ¬èº«çš„ç±»å‹ç³»ç»Ÿæ¯”è¾ƒç®€å•ï¼Œä¸åƒScalaã€Kotlinç­‰è¯­è¨€ï¼Œæœ‰è¯¸å¦‚åå˜ã€é€†å˜ç­‰æ¦‚å¿µï¼ŒGoçš„ç±»å‹æ˜¯ã€Œä¸å˜çš„ã€ï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç ä¼šåœ¨ç¼–è¯‘æœŸå°±æŠ¥é”™&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Container[T A] []T
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">Append&lt;/span>(c Container[&lt;span style="color:#00688b;font-weight:bold">any&lt;/span>]) Container[&lt;span style="color:#00688b;font-weight:bold">any&lt;/span>] {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#658b00">append&lt;/span>(c, &lt;span style="color:#cd5555">&amp;#34;abc&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>a := &lt;span style="color:#658b00">make&lt;/span>(Container[&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>], &lt;span style="color:#b452cd">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008b45">Append&lt;/span>(a) &lt;span style="color:#228b22">// ç¼–è¯‘æœŸæŠ¥é”™ï¼Œcannot use a (variable of type Container[int]) as Container[any] value in argument to Append compilerIncompatibleAssign&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Goæ³›å‹çš„ç±»å‹æ˜¯é€šè¿‡ã€Œç±»å‹é›†ã€æ¥çº¦æŸçš„ã€‚ä¸‹é¢ç±»å‹å½¢å‚åé¢çš„éƒ¨åˆ†å°±æ˜¯ç±»å‹çº¦æŸï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> FromPtr[T &lt;span style="color:#00688b;font-weight:bold">any&lt;/span>](anyPtr *T) T &lt;span style="color:#228b22">// T çº¦æŸä¸º any, ç­‰åŒäºæ¥å—æ‰€æœ‰ç±»å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> AnySlice[T &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">string&lt;/span>] []T &lt;span style="color:#228b22">// T åªæ¥å— int, string&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šé¢çš„ä¾‹å­ä¸­ã€Œanyã€æ˜¯ä¸ªç±»å‹é›†ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ç±»å‹ã€‚ã€Œint | stringã€ä¹Ÿæ˜¯ä¸ªç±»å‹é›†ï¼ŒåŒ…å«äº†intå’Œstringä¸¤ä¸ªç±»å‹ã€‚&lt;/p>
&lt;p>å¦å¤–ä¸ºäº†ä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“ç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡interfaceæ¥å®šä¹‰ç±»å‹é›†ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªinterfaceä»£è¡¨æ‰€æœ‰intç±»å‹çš„ç±»å‹é›†ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Int &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int8&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int16&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int32&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#228b22">// ç„¶ååˆ©ç”¨Intæ¥åšçº¦æŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> GType[T Int] []T
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œã€ŒIntã€æ¥å£æ˜¯intã€int8ã€int16ã€int32ã€int64çš„ä¸€ä¸ªç±»å‹é›†ï¼Œé‚£ä¹ˆè¿™äº”ä¸ªç±»å‹éƒ½å¯ä»¥å»å®ä¾‹åŒ–æ³›å‹ç±»å‹ã€ŒGTypeã€ã€‚&lt;/p>
&lt;p>å®é™…ä¸Šï¼ŒGoçš„Specificationä¸­å·²ç»æŒ‡æ˜interfaceå®šä¹‰äº†ä¸€ä¸ªç±»å‹é›†ï¼š&lt;code>An interface type defines a type set&lt;/code>&lt;/p>
&lt;p>æˆ‘ä»¬çŸ¥é“Goçš„interfaceåœ¨ä¹‹å‰éƒ½åªèƒ½å®šä¹‰æ¥å£æ–¹æ³•ï¼Œæœ¬æ¬¡å¼•å…¥æ³›å‹åè¿˜èƒ½å®šä¹‰ä¸€ç»„ç±»å‹ã€‚ä¸ºäº†ä¿è¯å‘å‰å…¼å®¹ï¼Œinterfaceè¢«åˆ†æˆäº†ä¸‹é¢ä¸¤ç§ã€‚&lt;/p>
&lt;h3 id="åŸºç¡€æ¥å£basic-interfaces">åŸºç¡€æ¥å£ï¼ˆBasic interfacesï¼‰&lt;/h3>
&lt;p>åªåŒ…å«æ–¹æ³•çš„interfaceã€‚&lt;br>
å‡è®¾ç±»å‹&lt;code>T&lt;/code>å®ç°äº†åŸºæœ¬æ¥å£&lt;code>I&lt;/code>ä¸­å®šä¹‰çš„å…¨éƒ¨æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°ç±»å‹&lt;code>T&lt;/code>å®ç°äº†æ¥å£&lt;code>I&lt;/code>, ç±»å‹&lt;code>T&lt;/code>æ»¡è¶³æ¥å£&lt;code>I&lt;/code>çš„ç±»å‹çº¦æŸã€‚(æœ‰ç‚¹ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»å‹ä¸Šç•Œçš„å‘³é“)&lt;br>
ä¸¾ä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Type[T Parent] []T &lt;span style="color:#228b22">// æ³›å‹ç±»å‹ï¼Œç±»å‹çº¦æŸä¸ºParent&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Parent &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008b45">Func&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Child &lt;span style="color:#8b008b;font-weight:bold">struct&lt;/span> {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> (c Child) &lt;span style="color:#008b45">Func&lt;/span>() {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Child1 &lt;span style="color:#8b008b;font-weight:bold">struct&lt;/span> {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> t Type[Child] &lt;span style="color:#228b22">// ok, å› ä¸ºChildå®ç°äº†Parent&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> t1 Type[Child1] &lt;span style="color:#228b22">// wrong, Child1æ²¡æœ‰å®ç°æ–¹æ³•Func&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä¸€èˆ¬æ¥å£general-interfaces">ä¸€èˆ¬æ¥å£ï¼ˆGeneral interfacesï¼‰&lt;/h3>
&lt;p>é™¤äº†åŒ…å«æ–¹æ³•ï¼Œè¿˜ä¼šåŒ…å«&lt;code>t1|t2|â€¦|tn&lt;/code>è¿™ç§å½¢å¼çš„ç±»å‹å®šä¹‰çš„interfaceã€‚&lt;br>
å‡è®¾ç±»å‹&lt;code>T&lt;/code>æ˜¯æ¥å£&lt;code>I&lt;/code>å®šä¹‰çš„&lt;code>t1|t2|â€¦|tn&lt;/code>ä¸­çš„ä¸€ä¸ªï¼Œå¹¶ä¸”å®ç°äº†æ¥å£&lt;code>I&lt;/code>çš„æ‰€æœ‰æ–¹æ³•ã€‚é‚£ä¹ˆæˆ‘ä»¬ç§°ç±»å‹&lt;code>T&lt;/code>å®ç°äº†æ¥å£&lt;code>I&lt;/code>, ç±»å‹&lt;code>T&lt;/code>æ»¡è¶³æ¥å£&lt;code>I&lt;/code>çš„ç±»å‹çº¦æŸã€‚&lt;br>
ä¸¾ä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Type[T Parent] []T &lt;span style="color:#228b22">// æ³›å‹ç±»å‹ï¼Œç±»å‹çº¦æŸä¸ºParent&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Parent &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Child | Child1
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#008b45">Func&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Child &lt;span style="color:#8b008b;font-weight:bold">struct&lt;/span>{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> (c Child) &lt;span style="color:#008b45">Func&lt;/span>() {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Child1 &lt;span style="color:#8b008b;font-weight:bold">struct&lt;/span>{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Child2 &lt;span style="color:#8b008b;font-weight:bold">struct&lt;/span>{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> (c Child2) &lt;span style="color:#008b45">Func&lt;/span>() {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> t Type[Child] &lt;span style="color:#228b22">// ok, å› ä¸ºChildå®ç°äº†Parent&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> t1 Type[Child1] &lt;span style="color:#228b22">// wrong, Child1æ²¡æœ‰å®ç°æ–¹æ³•Func&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> t2 Type[Child2] &lt;span style="color:#228b22">// wrong, Child2å®ç°äº†æ–¹æ³•Funcï¼Œä½†ä¸æ˜¯ Child | Child1 ä¸­çš„ä¸€å‘˜&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ç±»å‹å¹¶é›†">ç±»å‹å¹¶é›†&lt;/h3>
&lt;p>ä¸€ä¸ªæ¥å£ä¸­ï¼Œæ¯è¡Œçš„ç±»å‹å–å¹¶é›†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntA &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int8&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int16&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntB &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00688b;font-weight:bold">int8&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int16&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int32&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntC &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> { &lt;span style="color:#228b22">// ç­‰ä»·äº int | int8 | int16 | int32 | int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IntA | IntB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ç±»å‹äº¤é›†">ç±»å‹äº¤é›†&lt;/h3>
&lt;p>ä¸€ä¸ªæ¥å£ä¸­è¡Œä¹‹é—´çš„ç±»å‹å®šä¹‰å°†å–äº¤é›†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntA &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int8&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int16&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntB &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00688b;font-weight:bold">int8&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int16&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int32&lt;/span> | &lt;span style="color:#00688b;font-weight:bold">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntC &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> { &lt;span style="color:#228b22">// ç­‰ä»·äº int8 | int16&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IntA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IntB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åº•å±‚ç±»å‹çº¦æŸ">åº•å±‚ç±»å‹çº¦æŸ&lt;/h3>
&lt;p>Goæ–°å¢äº†ä¸€ä¸ªç¬¦å·&lt;code>~&lt;/code>, ç½®äºåŸºç¡€ç±»å‹å‰çš„æ—¶å€™ï¼Œè¿™ä¸ªç±»å‹é›†åˆå°†ä¸æ­¢åŒ…å«è¿™ä¸ªåŸºç¡€ç±»å‹ï¼Œè¿˜ä¼šåŒ…å«æ‰€æœ‰åº•å±‚ç±»å‹ä¸ºè¯¥åŸºç¡€ç±»å‹çš„ç±»å‹ã€‚&lt;br>
æ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> Int &lt;span style="color:#8b008b;font-weight:bold">interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ~&lt;span style="color:#00688b;font-weight:bold">int&lt;/span> | ~&lt;span style="color:#00688b;font-weight:bold">int8&lt;/span> | ~&lt;span style="color:#00688b;font-weight:bold">int16&lt;/span> | ~&lt;span style="color:#00688b;font-weight:bold">int32&lt;/span> | ~&lt;span style="color:#00688b;font-weight:bold">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span> IntType &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> &lt;span style="color:#228b22">// IntTypeä¹Ÿæ»¡è¶³Intæ¥å£å®šä¹‰çš„ç±»å‹çº¦æŸ&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="åç»­">åç»­&lt;/h2>
&lt;ul>
&lt;li>æ³›å‹æ¥å£&lt;/li>
&lt;/ul>
- https://ngtrio.com/posts/go-genric/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>OpenWRTè·‘Goå®šæ—¶ä»»åŠ¡</title><link>https://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</link><pubDate>Sun, 23 Jan 2022 10:48:19 +0800</pubDate><guid>https://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/ -&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>å› ä¸ºå‰æ®µæ—¶é—´ä¸ºäº†åšä¸€ä¸ªå…¨å±€çš„ğŸªœï¼Œäºæ˜¯æŠŠå®¶é‡Œçš„è·¯ç”±å™¨åˆ·äº†ä¸€ä¸ªOpenWRTï¼Œå°½ç®¡è·¯ç”±å™¨æ€§èƒ½æ¯”è¾ƒæ‹‰èƒ¯ï¼Œä½†æ˜¯æ¶èµ·äº†ğŸªœåï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„é—ªå­˜ç©ºé—´ä»¥åŠå†…å­˜ç©ºé—´ï¼Œæœ€è¿‘æƒ³æŠŠè¿™ç‚¹ç©ºé—´ä¹Ÿç»™åˆ©ç”¨ä¸Šï¼Œ&lt;del>è·¯ç”±å™¨24hå·¥ä½œçš„ç”µè´¹å¾—æ‰¾è¡¥å›æ¥ã€‚&lt;/del> &lt;br>
æƒ³åˆ°ä¹‹å‰å­¦ä¹ Goçš„æ—¶å€™å†™äº†ä¸ªç®€å•çš„TGæœºå™¨äººï¼Œåˆšå¥½æœ€è¿‘æƒ³è·‘å‡ ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œäºæ˜¯å†³å®šæŠŠè¿™ä¸ªæœºå™¨äººæ­å»ºåˆ°è·¯ç”±å™¨ä¸Šã€‚&lt;/p>
&lt;h2 id="äº¤å‰ç¼–è¯‘">äº¤å‰ç¼–è¯‘&lt;/h2>
&lt;p>å› ä¸ºè·¯ç”±å™¨çš„CPUæ¶æ„ä¸ä¸€æ ·ï¼Œæˆ‘è‡ªå·±æœ¬æœºç¼–è¯‘çš„äºŒè¿›åˆ¶è‡ªç„¶æ˜¯æ— æ³•åœ¨è·¯ç”±å™¨ä¸Šè·‘èµ·æ¥çš„ã€‚æ‰€ä»¥éœ€è¦è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œè¿™é‡Œçœ‹åˆ°æˆ‘çš„è·¯ç”±å™¨CPUæ¶æ„æ˜¯&lt;code>mips&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>root@OpenWrt:~# uname -m
mips
&lt;/code>&lt;/pre>&lt;p>&lt;a href="https://go.dev/doc/install/source#environment">GoåŸç”Ÿå°±æ”¯æŒäº¤å‰ç¼–è¯‘&lt;code>mips&lt;/code>æŒ‡ä»¤é›†çš„äºŒè¿›åˆ¶&lt;/a>ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å°±å¾ˆç®€å•äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00688b">GOOS&lt;/span>=linux &lt;span style="color:#00688b">GOARCH&lt;/span>=mipsle &lt;span style="color:#00688b">GOMIPS&lt;/span>=softfloat go build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ—¶åŒºé—®é¢˜">æ—¶åŒºé—®é¢˜&lt;/h2>
&lt;p>æ™šä¸Šå®šæ—¶ä»»åŠ¡å†™å¥½ï¼Œç¼–è¯‘å¥½ï¼Œåœ¨è·¯ç”±å™¨ä¸Šè·‘èµ·æ¥åå°±ç¡è§‰å»äº†ï¼Œä½†æ˜¯ç¬¬äºŒå¤©æ—©ä¸Šä¹ç‚¹å¤šèµ·åºŠå‘ç°æˆ‘çš„tg botå¹¶æ²¡æœ‰æ”¶åˆ°cronä¸º&lt;code>0 0 8 * * ?&lt;/code>çš„å®šæ—¶ä»»åŠ¡æ¶ˆæ¯ã€‚&lt;br>
é¦–å…ˆsshåˆ°è·¯ç”±å™¨ï¼Œå¯ä»¥ç¡®å®šæˆ‘çš„tgbotçš„è¿›ç¨‹å¹¶æ²¡æœ‰æŒ‚æ‰ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¹Ÿæ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œä½†æ˜¯å‘ç°æ—¥å¿—çš„æ—¶é—´éƒ½æ˜¯&lt;code>UTC&lt;/code>æ—¶é—´ï¼Œè¿™å°±æ„å‘³ç€å®šæ—¶ä»»åŠ¡å…¶å®è¿˜æ²¡åˆ°è§¦å‘çš„æ—¶é—´ã€‚&lt;br>
ä½†æ˜¯è®°å¾—ä¹‹å‰æ˜¯åœ¨OpenWRTåå°æ˜¯è®¾ç½®è¿‡&lt;code>UTC+8&lt;/code>æ—¶åŒºçš„ï¼Œå¹¶ä¸”åœ¨è·¯ç”±å™¨çš„shellæ‰§è¡Œ&lt;code>date -R&lt;/code>ä¹Ÿæ˜¾ç¤ºçš„æ˜¯&lt;code>UTC+8&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>root@OpenWrt:/etc# date -R
Sun, 23 Jan 2022 10:56:06 +0800
&lt;/code>&lt;/pre>&lt;p>è€Œæˆ‘ä¹Ÿæ¸…æ¥šè®°å¾—Goçš„time.Format()é»˜è®¤å°±æ˜¯é‡‡ç”¨çš„ç³»ç»Ÿæ—¶åŒºï¼Œè¿™é‡ŒGoæ²¡æœ‰è¯»å–åˆ°å°±æœ‰ç‚¹å¥‡æ€ªäº†ã€‚&lt;br>
äºæ˜¯äº†è§£äº†ä¸‹ç»†èŠ‚ï¼š&lt;/p>
&lt;ol>
&lt;li>OpenWRTåœ¨å“ªé‡Œè®¾ç½®äº†æ—¶åŒº
&lt;ul>
&lt;li>/etc/TZæ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Goä»å“ªé‡Œè·å–ç³»ç»Ÿæ—¶åŒº
&lt;ul>
&lt;li>è¯»å–TZç¯å¢ƒå˜é‡&lt;/li>
&lt;li>è¯»å–/etc/localtimeæ–‡ä»¶&lt;/li>
&lt;li>æœ¬åœ°æ—¶åŒºè¯»å–å¤±è´¥ï¼Œä½¿ç”¨ UTC æ—¶é—´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>é—®é¢˜å°±å¾ˆæ˜¾ç„¶äº†ã€‚&lt;br>
è§£å†³ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>opkg update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install zoneinfo-asia
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a href="https://stackoverflow.com/a/60161561/11571735">Writing and Compiling Program For OpenWrt&lt;/a>&lt;br>
&lt;a href="https://go.dev/doc/install/source#environment">Go environment&lt;/a>&lt;br>
&lt;a href="https://www.imhanjm.com/2017/10/29/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3golang%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86(time.time)/">æ·±å…¥ç†è§£GOæ—¶é—´å¤„ç†(time.Time)&lt;/a>&lt;/p>
- https://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>Capnproto</title><link>https://ngtrio.com/posts/capnproto/</link><pubDate>Sun, 14 Nov 2021 16:52:38 +0800</pubDate><guid>https://ngtrio.com/posts/capnproto/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/capnproto/ -&lt;p>ä»Kitexçš„Rodemapä¸­çœ‹åˆ°è¿™ä¸€æ¡ï¼š&lt;/p>
&lt;p>&lt;img src="images/image-20211115000303622.png" alt="image-20211115000303622">&lt;/p>
&lt;h3 id="ç®€ä»‹">ç®€ä»‹&lt;/h3>
&lt;p>&lt;a href="https://capnproto.org/index.html">Cap&amp;rsquo;n Proto &lt;/a>æ˜¯Protocol Buffer 2 çš„ä¸»è¦ä½œè€… Kenton Varda ç»è¿‡å¤šå¹´çš„å®è·µç»éªŒå’Œå¬å–ç”¨æˆ·ä½¿ç”¨å»ºè®®åæ‰€è®¾è®¡å‡ºæ¥çš„æ•°æ®äº¤æ¢æ ¼å¼(interchange format) å’Œ RPC ç³»ç»Ÿã€‚&lt;/p>
&lt;h3 id="ç‰¹æ€§">ç‰¹æ€§&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>å¢é‡è¯»ï¼š&lt;/strong> Capâ€™n Proto çš„ message ä¸ç”¨ç­‰å…¨éƒ¨æ¥æ”¶å®Œæˆäº†æ‰å¼€å§‹å¤„ç†ã€‚å› ä¸ºæ¶ˆæ¯ä¸­çš„ inner å¯¹è±¡æ˜¯è¢«å®‰æ’åœ¨ outer å¯¹è±¡çš„åé¢çš„ï¼Œè€Œä¸åƒå…¶ä»–å¤§å¤šåè®®ä¸€æ ·æ˜¯åµŒå¥—å…³ç³»ã€‚&lt;/li>
&lt;li>&lt;strong>éšæœºè®¿é—®ï¼š&lt;/strong> èƒ½å¤Ÿåªè¯»ä¸€æ¡æ¶ˆæ¯ä¸­çš„ä¸€ä¸ª fieldï¼Œè€Œä¸ç”¨è§£ææ•´ä¸ªæ¶ˆæ¯ã€‚&lt;/li>
&lt;li>&lt;strong>mmapï¼š&lt;/strong> æ”¯æŒmmpã€‚åƒ protobuf å°±ä¸æ”¯æŒï¼Œè¯»å¾ˆå°ä¸€éƒ¨åˆ†ä¿¡æ¯ä¹Ÿä¼šåŠ è½½æ‰€æœ‰æ•°æ®åˆ°ç”¨æˆ·æ€ã€‚ï¼ˆå…¶å®ä¹Ÿæ²¡å•¥å¯æ¯”æ€§ï¼Œè¿™ä¸ªç‰¹æ€§ä¸»è¦è¿˜æ˜¯å› ä¸ºæ²¡æœ‰encoding/decodingè¿‡ç¨‹ï¼‰&lt;/li>
&lt;li>&lt;strong>é«˜æ•ˆçš„è¿›ç¨‹é—´é€šä¿¡ï¼š&lt;/strong> åŒæœºå™¨ä¸Šçš„å¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡å…±äº«å†…å­˜æ¥åˆ†äº«Cap&amp;rsquo;n Messageã€‚æ²¡æœ‰å¿…è¦å°†æ•°æ®åœ¨user/kernelä¹‹é—´æ¥å›æ‹·è´ã€‚&lt;/li>
&lt;li>&lt;strong>å†…å­˜é›†ä¸­åˆ†é…ï¼š&lt;/strong> Capâ€™n Proto çš„å¯¹è±¡é€šå¸¸ä¼šé›†ä¸­åˆ†é…ï¼Œæœ‰ç‚¹ç±»ä¼¼æ± åŒ–ï¼Œè¾¾åˆ°å¯å¤ç”¨çš„æ•ˆæœï¼Œç¼“å­˜å‹å¥½ã€‚&lt;/li>
&lt;li>&lt;strong>ç”Ÿæˆçš„ä»£ç é‡å°ï¼š&lt;/strong> Protobuf ä¼šä¸ºæ¯ç§æ¶ˆæ¯ç±»å‹ç”Ÿæˆè§£æå’Œç¼–ç çš„ä»£ç ,ä»£ç é‡å·¨å¤§. Capâ€™n Proto ç”Ÿæˆçš„ä»£ç å°‘è‡³å°‘ä¸€ä¸ªæ•°é‡çº§ã€‚&lt;/li>
&lt;li>&lt;strong>Time-traveling RPCï¼š&lt;/strong> ä¸‹é¢ä»‹ç»ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="rpc-protocol">RPC Protocol&lt;/h3>
&lt;p>&lt;a href="https://capnproto.org/rpc.html">Time travel&lt;/a>&lt;/p>
- https://ngtrio.com/posts/capnproto/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>Go Array&amp;Slice</title><link>https://ngtrio.com/posts/go-array-slice/</link><pubDate>Tue, 05 Oct 2021 16:14:16 +0800</pubDate><guid>https://ngtrio.com/posts/go-array-slice/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/go-array-slice/ -&lt;h2 id="spec">Spec&lt;/h2>
&lt;blockquote>
&lt;p>Array:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>ArrayType = &amp;#34;[&amp;#34; ArrayLength &amp;#34;]&amp;#34; ElementType .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ArrayLength = Expression .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ElementType = Type .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶ä¸­ArrayLengthæ˜¯Arrayç±»å‹çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œä¸”å¿…é¡»èƒ½å¤Ÿè®¡ç®—ä¸ºä¸€ä¸ªéè´Ÿintç±»å‹å¯â€œå¸¸é‡è¡¨ç¤ºï¼ˆ&lt;a href="https://golang.org/ref/spec#Constants">constant&lt;/a> &lt;a href="https://golang.org/ref/spec#Representability">representable&lt;/a>ï¼‰â€çš„å€¼&lt;/p>
&lt;p>Slice:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>SliceType = &amp;#34;[&amp;#34; &amp;#34;]&amp;#34; ElementType .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>ä¸€ä¸ªSliceåªè¦ç»è¿‡äº†åˆå§‹åŒ–ï¼Œå°±å¿…å°†å’Œä¸€ä¸ªåº•å±‚çš„Arrayç»‘å®šï¼Œç»‘å®šåœ¨åŒä¸€ä¸ªArrayä¸Šçš„Slicesä¼šå…±äº«å†…å­˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡makeåˆå§‹åŒ–ä¸€ä¸ªSliceçš„åŒæ—¶ä¼šåˆå§‹åŒ–ä¸€ä¸ªéšå¼çš„Arrayï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#658b00">make&lt;/span>([]&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>, &lt;span style="color:#b452cd">50&lt;/span>, &lt;span style="color:#b452cd">100&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#658b00">new&lt;/span>([&lt;span style="color:#b452cd">100&lt;/span>]&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>)[&lt;span style="color:#b452cd">0&lt;/span>:&lt;span style="color:#b452cd">50&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="arrays">Arrays&lt;/h2>
&lt;p>Golangçš„æ•°ç»„ç±»å‹å’ŒCä¸åŒï¼š&lt;/p>
&lt;ol>
&lt;li>Golangçš„æ•°ç»„æ˜¯å€¼ï¼Œè€Œä¸åƒCæ˜¯æ•°ç»„å¤´æŒ‡é’ˆ&lt;/li>
&lt;li>æ‰€ä»¥ï¼Œåœ¨ç»™ä¸€ä¸ªå‡½æ•°ä¼ æ•°ç»„å‚æ ‘çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ä¼ çš„æ•´ä¸ªæ•°ç»„çš„ä¸€ä»½copy&lt;/li>
&lt;li>æ•°ç»„é•¿åº¦æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥&lt;code>[10]int&lt;/code>å’Œ&lt;code>[20]int&lt;/code>æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»å‹&lt;/li>
&lt;/ol>
&lt;h2 id="slices">Slices&lt;/h2>
&lt;p>å†…éƒ¨è¡¨ç¤ºä¸ºä¸€ä¸ªä¸‰å…ƒç´ ç»“æ„ä½“ï¼š&lt;/p>
&lt;ol>
&lt;li>ptrï¼šæŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ&lt;/li>
&lt;li>lenï¼šSliceé•¿åº¦ï¼Œè¡¨ç¤ºå¼•ç”¨çš„å…ƒç´ ä¸ªæ•°&lt;/li>
&lt;li>capï¼šSliceå®¹é‡ï¼Œä»Sliceå¼•ç”¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°åº•å±‚æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æ•°é‡&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="images/slice-struct.png" alt="img">&lt;/p>
&lt;p>æ¯”å¦‚&lt;code>s := make([]int, 5)&lt;/code>ï¼Œsçš„è¡¨ç¤ºå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="images/slice-1.png" alt="img">&lt;/p>
&lt;p>å¯¹sè¿›è¡Œåˆ‡ç‰‡&lt;code>s = s[2:4]&lt;/code>ï¼Œsçš„è¡¨ç¤ºå˜ä¸ºä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;p>&lt;img src="images/slice-2.png" alt="img">&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥åœ¨capèŒƒå›´å†…è¿›è¡ŒSliceçš„æ‰©å¼ ï¼Œæ¯”å¦‚ï¼š&lt;code>s = s[:cap(s)]&lt;/code>ï¼Œsçš„è¡¨ç¤ºå˜ä¸ºä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;p>&lt;img src="images/slice-3.png" alt="img">&lt;/p>
&lt;p>è¶…è¿‡capä»¥åŠè®¿é—®åº•å±‚æ•°ç»„ä¸­å¤„äºSliceæ›´å‰çš„å…ƒç´ éƒ½æ˜¯&lt;strong>ä¸è¢«å…è®¸çš„&lt;/strong>&lt;/p>
&lt;h4 id="æ‰©å®¹">&lt;strong>æ‰©å®¹&lt;/strong>&lt;/h4>
&lt;p>å½“å‘Sliceä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™å‘ç°åº•å±‚Arrayçš„å®¹é‡å·²ç»ä¸å¤Ÿåˆ™ä¼šè§¦å‘æ‰©å®¹ï¼Œåº•å±‚Arrayå°†å‘ç”Ÿå†…å­˜é‡åˆ†é…ã€‚ä¸ºäº†å‡å°‘å†…å­˜åˆ†é…æ“ä½œï¼Œæˆ‘ä»¬åº”è¯¥åœ¨åˆå§‹åŒ–Sliceçš„æ—¶å€™å°½é‡ç»™å‡ºä¸€ä¸ªé¢„æœŸçš„capå¤§å°ã€‚&lt;/p>
&lt;p>æ‰©å®¹é€»è¾‘ç±»ä¼¼ä¸ä¸‹é¢è¿™æ®µä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">Append&lt;/span>(slice, data []&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span>) []&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> l := &lt;span style="color:#658b00">len&lt;/span>(slice)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> l + &lt;span style="color:#658b00">len&lt;/span>(data) &amp;gt; &lt;span style="color:#658b00">cap&lt;/span>(slice) { &lt;span style="color:#228b22">// reallocate&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#228b22">// Allocate double what&amp;#39;s needed, for future growth.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> newSlice := &lt;span style="color:#658b00">make&lt;/span>([]&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span>, (l+&lt;span style="color:#658b00">len&lt;/span>(data))*&lt;span style="color:#b452cd">2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#228b22">// The copy function is predeclared and works for any slice type.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#658b00">copy&lt;/span>(newSlice, slice)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> slice = newSlice
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> slice = slice[&lt;span style="color:#b452cd">0&lt;/span>:l+&lt;span style="color:#658b00">len&lt;/span>(data)]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#658b00">copy&lt;/span>(slice[l:], data)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> slice
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬å¿…é¡»å°†æ‰©å®¹åçš„Sliceè¿”å›ï¼Œå› ä¸ºSliceæœ¬èº«å®é™…ä¸Šè¿˜æ˜¯å€¼ä¼ é€’ï¼ˆåº•å±‚å­—æ®µptrï¼Œlenï¼Œ capï¼‰&lt;/p>
&lt;h4 id="æ½œåœ¨çš„é™·é˜±">&lt;strong>æ½œåœ¨çš„é™·é˜±&lt;/strong>&lt;/h4>
&lt;p>ç”±äºArrayåªæœ‰åœ¨ä¸è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨çš„æ—¶å€™æ‰èƒ½å¤Ÿè¢«GCæ‰ï¼Œè€ŒSliceä¼šéšå¼åœ°å¼•ç”¨ä¸€ä¸ªåº•å±‚Arrayï¼Œé‚£ä¹ˆä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> digitRegexp = regexp.&lt;span style="color:#008b45">MustCompile&lt;/span>(&lt;span style="color:#cd5555">&amp;#34;[0-9]+&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">FindDigits&lt;/span>(filename &lt;span style="color:#00688b;font-weight:bold">string&lt;/span>) []&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b, _ := ioutil.&lt;span style="color:#008b45">ReadFile&lt;/span>(filename)
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> digitRegexp.&lt;span style="color:#008b45">Find&lt;/span>(b)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>bæ˜¯ä¸€ä¸ªåŒ…å«äº†æ•´ä¸ªæ–‡ä»¶å†…å®¹çš„Slice&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿”å›å€¼æ˜¯åŒ…å«äº†æ–‡ä»¶å†…å®¹ä¸­ç¬¬ä¸€ç»„è¿ç»­æ•°å­—çš„Slice&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿™ä¸¤ä¸ªSliceéƒ½å¼•ç”¨ç€å­˜å‚¨ç€æ‰€æœ‰æ–‡ä»¶å†…å®¹çš„åº•å±‚Array&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å½“è¯¥å‡½æ•°è¢«Callerè°ƒç”¨åï¼Œå®é™…ä¸ŠçœŸæ­£æœ‰ç”¨çš„æ•°æ®å°±æ˜¯è¿”å›å€¼Sliceæ‰€å¼•ç”¨çš„æ•°æ®ã€‚å®ƒçš„åº•å±‚Arrayæœ‰å¤§é‡ä¸éœ€è¦çš„æ•°æ®å¾—ä¸åˆ°GCã€‚&lt;/p>
&lt;p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬éœ€è¦çš„æ•°æ®copyåˆ°ä¸€ä¸ªæ–°çš„Sliceä¸­å†è¿”å›ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">CopyDigits&lt;/span>(filename &lt;span style="color:#00688b;font-weight:bold">string&lt;/span>) []&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b, _ := ioutil.&lt;span style="color:#008b45">ReadFile&lt;/span>(filename)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b = digitRegexp.&lt;span style="color:#008b45">Find&lt;/span>(b)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> c := &lt;span style="color:#658b00">make&lt;/span>([]&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span>, &lt;span style="color:#658b00">len&lt;/span>(b))
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#658b00">copy&lt;/span>(c, b)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>æœ¬æ–‡å›¾ç‰‡å¼•è‡ªï¼š&lt;/p>
&lt;p>&lt;a href="https://go.dev/blog/slices-intro">https://go.dev/blog/slices-intro&lt;/a>&lt;/p>
&lt;/blockquote>
- https://ngtrio.com/posts/go-array-slice/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>é€šè¿‡Github Actionéƒ¨ç½²hexoåšå®¢åˆ°pages</title><link>https://ngtrio.com/posts/hexo-with-github-action/</link><pubDate>Mon, 04 Oct 2021 14:41:24 +0800</pubDate><guid>https://ngtrio.com/posts/hexo-with-github-action/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/hexo-with-github-action/ -&lt;p>Hexoéƒ¨ç½²åˆ° Github Page çš„ä¸€èˆ¬åˆ†ä¸ºä¸‹é¢ä¸‰æ­¥&lt;/p>
&lt;ol>
&lt;li>å†™ Markdown&lt;/li>
&lt;li>å°† Markdown æ¸²æŸ“æˆ HTML é™æ€é¡µé¢&lt;/li>
&lt;li>å°†æ¸²æŸ“å¾—åˆ°çš„æ–‡ä»¶æäº¤åˆ° &lt;code>&amp;lt;username&amp;gt;.github.io&lt;/code> ä»“åº“&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœä»¥å†™åšå®¢ä¸ºç›®çš„è¯ï¼Œä¸Šè¿°2ï¼Œ3ä¸¤æ­¥å…¶å®æ˜¯â€œå†™åšå®¢â€œä¹‹å¤–çš„æ“ä½œï¼Œæ¯”è¾ƒå½±å“å†™åšå®¢çš„æ²‰æµ¸å¼ä½“éªŒã€‚è¿™é‡Œå¯ä»¥å¼•å…¥ç°æˆçš„ Github Action ï¼Œå°†ä¸Šè¿°çš„ workflow è¿›è¡Œè‡ªåŠ¨åŒ–ã€‚&lt;/p>
&lt;h2 id="å‡†å¤‡">å‡†å¤‡&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Github Pages ä»“åº“ &lt;code>&amp;lt;username&amp;gt;.github.io&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Blog çš„æºä»£ç ä»“åº“&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ssh-keygen ç”Ÿæˆä¸€å¯¹éå¯¹ç§°å¯†é’¥ï¼Œå…¬é’¥ä½œä¸º page ä»“åº“çš„ &lt;code>Deploy Key&lt;/code>ï¼Œç§é’¥å¡«å…¥æºä»£ç ä»“åº“çš„ Secretsï¼Œä¾›åç»­ Github Action æäº¤ä»£ç åˆ° page ä»“åº“&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£… hexo git éƒ¨ç½²æ’ä»¶ hexo-deployer-git&lt;/p>
&lt;pre tabindex="0">&lt;code>npm install hexo-deployer-git --save
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h2 id="é…ç½®hexo-deploy">é…ç½®Hexo Deploy&lt;/h2>
&lt;p>åœ¨hexoæºç å·¥ç¨‹ä¸‹çš„ &lt;code>_config.yml&lt;/code> ä¸­é…ç½®ä¸‹åˆ—ä¿¡æ¯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">deploy&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">type&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>git&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">repo&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>git@github.com:username/&amp;lt;username&amp;gt;.github.io.git&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">branch&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>åˆ†æ”¯å&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">message&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>æäº¤ä¿¡æ¯&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨æ‰§è¡Œ &lt;code>hexo deploy&lt;/code> å‘½ä»¤æ—¶ï¼Œhexo-deployer-git æ’ä»¶å¤§è‡´ä¼šæ‰§è¡Œå¦‚ä¸‹æµç¨‹ï¼š&lt;/p>
&lt;ol>
&lt;li>å°†æºä»£ç ä»“åº“æ¸²æŸ“æˆé™æ€ç½‘é¡µåˆ° &lt;code>.deploy_git&lt;/code> ç›®å½•ä¸‹&lt;/li>
&lt;li>ç„¶åå°† &lt;code>.deploy_git&lt;/code> ç›®å½• force push åˆ°é…ç½®ä¸­æŒ‡å®šçš„ repo ä¸‹çš„ branch ä¸Šï¼ŒåŒæ—¶ git æäº¤ä¿¡æ¯å°±æ˜¯é…ç½®ä¸­æŒ‡å®šçš„ message&lt;/li>
&lt;/ol>
&lt;p>æ›´å¤šä¿¡æ¯ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://hexo.io/docs/one-command-deployment">hexoéƒ¨ç½²&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-gitæ’ä»¶&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="ç¼–å†™github-action-workflow">ç¼–å†™Github Action Workflow&lt;/h2>
&lt;p>æ•´ä¸ª workflow æ‹†åˆ†æˆä¸‹é¢å‡ æ­¥ï¼š&lt;/p>
&lt;ol>
&lt;li>checkout åˆ°æºç ä¸»åˆ†æ”¯&lt;/li>
&lt;li>é…ç½® node ç¯å¢ƒ&lt;/li>
&lt;li>é…ç½® git ç¯å¢ƒ&lt;/li>
&lt;li>deploy hexo å¸¦pageä»“åº“&lt;/li>
&lt;/ol>
&lt;p>workflowæ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>auto deploy&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#8b008b;font-weight:bold">on&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">push&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">branches&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- main&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">workflow_dispatch&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#8b008b;font-weight:bold">jobs&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">build&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">runs-on&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>ubuntu-latest&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">steps&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#8b008b;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Checkout to main&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">with&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">submodules&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>recursive&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">fetch-depth&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#b452cd">0&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">uses&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>actions/checkout@v2&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#8b008b;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Setup Node&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">uses&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>actions/setup-node@v1&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">with&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">node-version&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#cd5555">&amp;#39;14&amp;#39;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#8b008b;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Setup Git&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">env&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">DEPLOY_SECRET&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>${{ secrets.DEPLOY_SECRET }}&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">run&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>|&lt;span style="color:#cd5555">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> mkdir -p ~/.ssh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> echo &amp;#34;$DEPLOY_SECRET&amp;#34; &amp;gt; ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> chmod 400 ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> ssh-keyscan github.com &amp;gt;&amp;gt; ~/.ssh/known_hosts
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> git config --global user.email &amp;#34;ngtercet@protonmail.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> git config --global user.name &amp;#34;Jaron&amp;#34;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#8b008b;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Deploy&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">run&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>|&lt;span style="color:#cd5555">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> chmod +x deploy.sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cd5555"> ./deploy.sh&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>deploy è„šæœ¬å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#1e889b">#!/usr/bin/env bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#1e889b">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22"># install dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>npm install hexo-cli -g
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>npm install
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22"># fetch mtime from git log&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git ls-files -z source/_posts |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">while&lt;/span> &lt;span style="color:#658b00">read&lt;/span> -d &lt;span style="color:#cd5555">&amp;#39;&amp;#39;&lt;/span> path; &lt;span style="color:#8b008b;font-weight:bold">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> [[ &lt;span style="color:#00688b">$path&lt;/span> == *.md ]]; &lt;span style="color:#8b008b;font-weight:bold">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00688b">mtime&lt;/span>=&lt;span style="color:#8b008b;font-weight:bold">$(&lt;/span>git log -1 --format=&lt;span style="color:#cd5555">&amp;#34;@%ct&amp;#34;&lt;/span> &lt;span style="color:#00688b">$path&lt;/span>&lt;span style="color:#8b008b;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> touch -d &lt;span style="color:#00688b">$mtime&lt;/span> &lt;span style="color:#00688b">$path&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#658b00">echo&lt;/span> &lt;span style="color:#cd5555">&amp;#34;change &lt;/span>&lt;span style="color:#00688b">$path&lt;/span>&lt;span style="color:#cd5555"> mtime to &lt;/span>&lt;span style="color:#00688b">$mtime&lt;/span>&lt;span style="color:#cd5555">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22"># hexo deploy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>hexo clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>hexo deploy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="è¸©å‘ç‚¹">è¸©å‘ç‚¹&lt;/h2>
&lt;h4 id="post-çš„æ›´æ–°æ—¶é—´ä¸å¯¹">Post çš„â€œæ›´æ–°æ—¶é—´â€ä¸å¯¹&lt;/h4>
&lt;h5 id="é—®é¢˜">é—®é¢˜&lt;/h5>
&lt;p>æœ€åˆ Github Action è·‘èµ·æ¥åå‘ç°åšå®¢é‡Œæ‰€æœ‰ Post çš„â€ä¸Šæ¬¡æ›´æ–°æ—¶é—´ï¼ˆupdatedå±æ€§ï¼‰â€œéƒ½è¢«åˆ·æ–°æˆéƒ¨ç½²çš„æ—¶é—´ç‚¹äº†ã€‚&lt;/p>
&lt;p>ç¿»äº†ä¸‹ Hexo ç›¸å…³æ–‡æ¡£å‘ç°ï¼ŒPost çš„ updated å±æ€§åœ¨ç¼ºçœçš„æƒ…å†µä¸‹é»˜è®¤æ˜¯ fallback æˆ mtimeï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶çš„ &lt;code>Modified time&lt;/code>ã€‚&lt;/p>
&lt;p>åœ¨ action æ¯æ¬¡è·‘çš„æ—¶å€™ï¼Œå…¶å®éƒ½æ˜¯åœ¨æ„å»ºæœºå™¨å…ˆ clone äº†ä¸€ä»½æºç åº“ï¼Œæ‰€æœ‰ä»£ç æ–‡ä»¶å¯¹äºæ„å»ºæœºå™¨æ¥è¯´éƒ½æ˜¯æ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚&lt;/p>
&lt;p>è€Œ linux ä¸‹æ–°åˆ›å»ºæ–‡ä»¶çš„ &lt;code>Modified time&lt;/code> å°±æ˜¯è¢«åˆå§‹åŒ–ä¸ºåˆ›å»ºæ—¶é—´çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>âœ ~ date &amp;amp;&amp;amp; touch &lt;span style="color:#658b00">test&lt;/span> &amp;amp;&amp;amp; stat &lt;span style="color:#658b00">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Mon Oct &lt;span style="color:#b452cd">4&lt;/span> 03:36:08 PM CST &lt;span style="color:#b452cd">2021&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> File: &lt;span style="color:#658b00">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Size: &lt;span style="color:#b452cd">0&lt;/span> Blocks: &lt;span style="color:#b452cd">0&lt;/span> IO Block: &lt;span style="color:#b452cd">4096&lt;/span> regular empty file
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>Device: 8,7 Inode: &lt;span style="color:#b452cd">135137&lt;/span> Links: &lt;span style="color:#b452cd">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Access: (0644/-rw-r--r--) Uid: ( 1000/ jaron) Gid: ( 1000/ jaron)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Access: 2021-10-04 15:36:08.763454559 +0800
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Modify: 2021-10-04 15:36:08.763454559 +0800
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Change: 2021-10-04 15:36:08.763454559 +0800
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Birth: 2021-10-04 15:36:08.763454559 +0800
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰€ä»¥ä¸Šè¿°é—®é¢˜ä¹Ÿå°±ä¸è¨€è€Œå–»äº†ã€‚&lt;/p>
&lt;h5 id="è§£å†³">è§£å†³&lt;/h5>
&lt;ol>
&lt;li>
&lt;p>Hexoæ–‡æ¡£çš„åšæ³•&lt;/p>
&lt;p>å…¶å® Hexo æ–‡æ¡£å¯¹è¿™ä¸ªé—®é¢˜ä¹Ÿæœ‰ç›¸å…³æè¿°ï¼Œå…¶ä¸­è¯´çš„æ˜¯ git å·¥ä½œæµä¸‹å¯ä»¥å°† updated å±æ€§ fallback æˆ dateï¼Œå³æ–‡ä»¶åˆ›å»ºæ—¶é—´ã€‚è¿™ç§æ–¹å¼åŸºæœ¬ç›¸å½“äºå› å™åºŸé£Ÿï¼Œç›´æ¥å°† updated å±æ€§æœ¬èº«çš„è¯­ä¹‰ç»™å±è”½äº†ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>updated_option&lt;/strong>&lt;/p>
&lt;p>&lt;code>updated_option&lt;/code> æ§åˆ¶äº†å½“ Front Matter ä¸­æ²¡æœ‰æŒ‡å®š &lt;code>updated&lt;/code> æ—¶ï¼Œ&lt;code>updated&lt;/code> å¦‚ä½•å–å€¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>mtime&lt;/code>: ä½¿ç”¨æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚è¿™æ˜¯ä» Hexo 3.0.0 å¼€å§‹çš„é»˜è®¤è¡Œä¸ºã€‚&lt;/li>
&lt;li>&lt;code>date&lt;/code>: ä½¿ç”¨ &lt;code>date&lt;/code> ä½œä¸º &lt;code>updated&lt;/code> çš„å€¼ã€‚å¯è¢«ç”¨äº Git å·¥ä½œæµä¹‹ä¸­ï¼Œå› ä¸ºä½¿ç”¨ Git ç®¡ç†ç«™ç‚¹æ—¶ï¼Œæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¥æœŸå¸¸å¸¸ä¼šå‘ç”Ÿæ”¹å˜&lt;/li>
&lt;li>&lt;code>empty&lt;/code>: ç›´æ¥åˆ é™¤ &lt;code>updated&lt;/code>ã€‚ä½¿ç”¨è¿™ä¸€é€‰é¡¹å¯èƒ½ä¼šå¯¼è‡´å¤§éƒ¨åˆ†ä¸»é¢˜å’Œæ’ä»¶æ— æ³•æ­£å¸¸å·¥ä½œã€‚&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>æ ¹æ® git log è·å– post çš„ last commit time&lt;/p>
&lt;p>åœ¨ workflow ä¸­æ·»åŠ ä¸€æ­¥ï¼šå°† post æ–‡ä»¶ä¸Šæ¬¡ git commit çš„æ—¶é—´ï¼Œè®¾ç½®æˆè¯¥æ–‡ä»¶åœ¨ Github Action æ„å»ºæœºå™¨ä¸‹çš„mtimeã€‚&lt;/p>
&lt;p>é‚£ä¹ˆHexoåœ¨æ¸²æŸ“çš„æ—¶å€™å°±ä¼šå°† post çš„ä¸Šæ¬¡æ›´æ–°æ—¶é—´è®¾ç½®ä¸ºè¯¥ post ä¸Šæ¬¡ git commit çš„æ—¶é—´äº†ï¼ˆæˆ‘ä»¬å°†æ¯ä¸€æ¬¡ post æ–‡ä»¶çš„ git commit éƒ½è§†ä½œå‘/æ›´æ–° postï¼‰ã€‚&lt;/p>
&lt;p>è¿™éƒ¨åˆ†å·¥ä½œå®é™…å·²ç»åŒ…å«äºä¸Šæ–‡çš„ deploy è„šæœ¬ä¸­ï¼Œè¿™é‡Œå•ç‹¬æ‹å‡ºæ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22"># fetch mtime from git log&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git ls-files -z source/_posts |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">while&lt;/span> &lt;span style="color:#658b00">read&lt;/span> -d &lt;span style="color:#cd5555">&amp;#39;&amp;#39;&lt;/span> path; &lt;span style="color:#8b008b;font-weight:bold">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> [[ &lt;span style="color:#00688b">$path&lt;/span> == *.md ]]; &lt;span style="color:#8b008b;font-weight:bold">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> &lt;span style="color:#00688b">mtime&lt;/span>=&lt;span style="color:#8b008b;font-weight:bold">$(&lt;/span>git log -1 --format=&lt;span style="color:#cd5555">&amp;#34;@%ct&amp;#34;&lt;/span> &lt;span style="color:#00688b">$path&lt;/span>&lt;span style="color:#8b008b;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> touch -d &lt;span style="color:#00688b">$mtime&lt;/span> &lt;span style="color:#00688b">$path&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#658b00">echo&lt;/span> &lt;span style="color:#cd5555">&amp;#34;change &lt;/span>&lt;span style="color:#00688b">$path&lt;/span>&lt;span style="color:#cd5555"> mtime to &lt;/span>&lt;span style="color:#00688b">$mtime&lt;/span>&lt;span style="color:#cd5555">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>æ³¨æ„ï¼š&lt;/strong>&lt;/p>
&lt;p>checkout action é»˜è®¤æ˜¯ shallow cloneï¼Œä½†æˆ‘ä»¬éœ€è¦æ‹‰å–å…¨é‡ git log æ‰èƒ½è¯»åˆ°æ­£ç¡®çš„ last commit timeï¼Œæ‰€ä»¥è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#8b008b;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Checkout to main&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">with&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">submodules&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>recursive&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#228b22"># æ‹‰å–å…¨é‡ log&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">fetch-depth&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#b452cd">0&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#8b008b;font-weight:bold">uses&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>actions/checkout@v2&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>checkout action çš„æ›´å¤šä¿¡æ¯ï¼š&lt;/p>
&lt;p>&lt;a href="https://github.com/actions/checkout">https://github.com/actions/checkout&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
- https://ngtrio.com/posts/hexo-with-github-action/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>è¯»DDIA-æ•°æ®å¤åˆ¶</title><link>https://ngtrio.com/posts/ddia/</link><pubDate>Sat, 02 Oct 2021 11:29:06 +0800</pubDate><guid>https://ngtrio.com/posts/ddia/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/ddia/ -&lt;h2 id="æ•°æ®å¤åˆ¶">æ•°æ®å¤åˆ¶&lt;/h2>
&lt;p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ é€šè¿‡æ•°æ®å¤åˆ¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¾¾åˆ°ä¸‹åˆ—ç›®çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨å…¨çƒå„åœ°æ•°æ®ä¸­å¿ƒé—´è¿›è¡Œæ•°æ®å¤åˆ¶ï¼Œä½¿å¾—æ•°æ®åœ¨åœ°ç†ä¸Šæ›´åŠ æ¥è¿‘ç”¨æˆ·ï¼Œé™ä½ç”¨æˆ·è¯·æ±‚å»¶è¿Ÿ&lt;/li>
&lt;li>æé«˜å¯ç”¨æ€§ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬æœ‰ç»è¿‡æ•°æ®å¤åˆ¶å¾—åˆ°çš„å‰¯æœ¬ç»§ç»­å·¥ä½œ&lt;/li>
&lt;li>æ¨ªå‘æ‰©å±•ï¼Œç”¨å¤šä¸ªæ•°æ®ä¸€è‡´çš„èŠ‚ç‚¹æä¾›åŒä¸€ä¸ªæœåŠ¡ï¼Œæé«˜ååé‡&lt;/li>
&lt;/ul>
&lt;p>ç›®å‰ä¸šç•Œæœ‰ä¸‹é¢å‡ ç§æ•°æ®å¤åˆ¶æ–¹æ¡ˆï¼š&lt;/p>
&lt;ol>
&lt;li>ä¸»ä»å¤åˆ¶&lt;/li>
&lt;li>å¤šä¸»èŠ‚ç‚¹å¤åˆ¶&lt;/li>
&lt;li>æ— ä¸»èŠ‚ç‚¹å¤åˆ¶&lt;/li>
&lt;/ol>
&lt;h3 id="ä¸»ä»å¤åˆ¶">ä¸»ä»å¤åˆ¶&lt;/h3>
&lt;p>åŸç†ç®€è¿°ï¼š&lt;/p>
&lt;ol>
&lt;li>æŒ‡å®šä¸€ä¸ªèŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹ï¼Œå…¶ä»–éƒ½ä¸ºä»èŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯å†™æ•°æ®åº“è¯·æ±‚å…¨éƒ¨è·¯ç”±åˆ°ä¸»èŠ‚ç‚¹ï¼Œç”±ä¸»èŠ‚ç‚¹é¦–å…ˆå°†æ•°æ®å†™å…¥æœ¬åœ°&lt;/li>
&lt;li>ä¸»èŠ‚ç‚¹æ•°æ®æœ¬åœ°å†™å…¥å®Œæˆåï¼Œå°†æ•°æ®æ›´æ”¹æ—¥å¿—æˆ–è€…æ›´æ”¹æµå‘é€ç»™æ‰€æœ‰çš„ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹å°†æ•°æ®å†™å…¥æœ¬åœ°ï¼ŒåŒæ—¶ä¸¥æ ¼ä¿æŒä¸ä¸»èŠ‚ç‚¹ç›¸åŒçš„å†™å…¥æ•°æ®&lt;/li>
&lt;li>å®¢æˆ·ç«¯è¯»æ•°æ®è¯·æ±‚å¯ä»¥è·¯ç”±åˆ°å…¨éƒ¨èŠ‚ç‚¹&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>æ³¨æ„ï¼šä»èŠ‚ç‚¹åªæ¥å—è¯»æ•°æ®è¯·æ±‚ï¼Œå†™è¯·æ±‚ç”±ä¸»èŠ‚ç‚¹è´Ÿè´£&lt;/strong>&lt;/p>
&lt;p>&lt;img src="images/ddia-1.png" alt="">&lt;/p>
&lt;p>å›¾1. åŸºäºé¢†å¯¼è€…(ä¸»-ä»)çš„å¤åˆ¶&lt;/p>
&lt;p>&lt;strong>åŒæ­¥å¤åˆ¶ or å¼‚æ­¥å¤åˆ¶&lt;/strong>&lt;/p>
&lt;p>&lt;img src="images/ddia-2.png" alt="">&lt;/p>
&lt;p>å›¾2. Follower 1åŒæ­¥å¤åˆ¶èŠ‚ç‚¹ï¼ŒFollower 2å¼‚æ­¥å¤åˆ¶èŠ‚ç‚¹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åŒæ­¥å¤åˆ¶&lt;/p>
&lt;p>ç”¨æˆ·çš„ä¸€æ¬¡æ•°æ®å†™è¯·æ±‚åœ¨æ‰€æœ‰åŒæ­¥å¤åˆ¶çš„ä»èŠ‚ç‚¹è¢«å†™å…¥åæ‰ä¼šå¾—åˆ°å“åº”ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¼˜ç‚¹ï¼šå§‹ç»ˆä¿è¯ä¸»ä»èŠ‚ç‚¹ä¸­çš„æ•°æ®ä¸€è‡´æ€§&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šåªè¦æœ‰ä»»ä½•åŒæ­¥å¤åˆ¶èŠ‚ç‚¹æ€§èƒ½é™ä½ç”šè‡³æ•…éšœï¼Œç”¨æˆ·è¯·æ±‚å“åº”æ—¶é—´å°†å¤§å¹…å¢åŠ &lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¼‚æ­¥å¤åˆ¶&lt;/p>
&lt;p>ç”¨æˆ·çš„ä¸€æ¬¡æ•°æ®å†™è¯·æ±‚åœ¨ä¸»èŠ‚ç‚¹å†™å…¥åå°±ä¼šå¾—åˆ°å“åº”ï¼Œä¸»ä»å¤åˆ¶å°†åœ¨åç»­å¼‚æ­¥è¿›è¡Œ&lt;/p>
&lt;ul>
&lt;li>ä¼˜ç‚¹ï¼šå³ä½¿ä»èŠ‚ç‚¹å‡ºç°æ•°æ®å¤åˆ¶æ»åï¼Œä¸»èŠ‚ç‚¹ä¾æ—§èƒ½å¤Ÿå“åº”å†™è¯·æ±‚ï¼Œååé‡å¾—åˆ°ä¿è¯&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šä¸‡ä¸€ä¸»èŠ‚ç‚¹ä¸»çº¿æ•…éšœä¸‹çº¿ï¼Œæ•°æ®å¯èƒ½è¿˜æ²¡æ¥å¾—åŠå¤åˆ¶å®Œæ¯•ï¼Œå¯¼è‡´æ–°ä¸Šçº¿çš„ä¸»èŠ‚ç‚¹ï¼ˆä»èŠ‚ç‚¹ç»§æ‰¿ï¼‰æ•°æ®ä¸¢å¤±&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åŠåŒæ­¥&lt;/p>
&lt;p>åœ¨ä¸šç•Œå®è·µä¸­ï¼Œä¸Šè¿°ä¸¤ç§æ–¹æ¡ˆåªé€‰å…¶ä¸€éƒ½å¤ªè¿‡æç«¯ï¼Œä¸€èˆ¬ä¼šç»“åˆä¸¤ç§å¤åˆ¶æ–¹å¼ä½¿ç”¨ï¼š&lt;/p>
&lt;p>ä¸€èˆ¬å­˜åœ¨ä¸€ä¸ªä»èŠ‚ç‚¹æ˜¯åŒæ­¥å¤åˆ¶ï¼Œå…¶ä»–ä»èŠ‚ç‚¹æ˜¯å¼‚æ­¥å¤åˆ¶ï¼Œä¸‡ä¸€åŒæ­¥èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå°†æå‡å¦ä¸€ä¸ªå¼‚æ­¥èŠ‚ç‚¹ä½œä¸ºåŒæ­¥èŠ‚ç‚¹ï¼Œè¿™æ ·å°±ä¿è¯äº†ä¸€ä¸ªé›†ç¾¤ä¸­è‡³å°‘æ‹¥æœ‰ä¸¤ä¸ªæ•°æ®ä¸€è‡´ä¸”æœ€æ–°çš„èŠ‚ç‚¹&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ–°å¢èŠ‚ç‚¹&lt;/strong>&lt;/p>
&lt;p>åœºæ™¯ï¼šæé«˜å®¹é”™èƒ½åŠ›ï¼Œæ›¿æ¢æ•…éšœèŠ‚ç‚¹ç­‰&lt;/p>
&lt;p>åŸç†ç®€è¿°ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨æŸä¸ªæ—¶é—´ç‚¹å¯¹ä¸»èŠ‚ç‚¹ç”Ÿæˆæ•°æ®å¿«ç…§&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†æ­¤å¿«ç…§åº”ç”¨åˆ°æ–°å¢èŠ‚ç‚¹&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–°å¢èŠ‚ç‚¹è¿æ¥è‡³ä¸»èŠ‚ç‚¹ï¼Œè¯·æ±‚å¿«ç…§ç‚¹ï¼ˆä¸æŸä¸ªæ—¥å¿—é¡ºåºç‚¹å…³è”ï¼‰åçš„æ•°æ®æ›´æ”¹æ—¥å¿—&lt;/p>
&lt;p>PostgreSQLå°†æ—¥å¿—é¡ºåºç‚¹ç§°ä¸ºlog sequence numberï¼ŒMySQLåˆ™ç§°ä¸ºbinlog coordinates&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è·å–æ•°æ®æ›´æ”¹æ—¥å¿—åï¼Œä¾æ¬¡åº”ç”¨æ—¥å¿—ä¸­çš„æ•°æ®å˜æ›´ï¼Œè¿™ä¸€æ­¥ç§°ä¸º&lt;strong>è¿½èµ¶&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>å¤„ç†èŠ‚ç‚¹å¤±æ•ˆ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä»èŠ‚ç‚¹å¤±æ•ˆï¼šè¿½èµ¶å¼æ¢å¤&lt;/p>
&lt;p>ä»èŠ‚ç‚¹å´©æºƒä¸‹çº¿åï¼Œåˆé¡ºåˆ©é‡å¯ï¼Œå¯ä»¥é€šè¿‡æ•°æ®å¤åˆ¶æ—¥å¿—å¾—çŸ¥æ•…éšœå‰å¤„ç†çš„æœ€åä¸€ç¬”äº‹åŠ¡ï¼Œç„¶åå‘ä¸»èŠ‚ç‚¹è¯·æ±‚è¯¥äº‹åŠ¡åå‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´æ—¥å¿—ï¼Œå¹¶åº”ç”¨åˆ°æœ¬åœ°ï¼Œä»è€Œ&lt;strong>è¿½èµ¶ä¸»èŠ‚ç‚¹&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸»èŠ‚ç‚¹å¤±æ•ˆï¼šèŠ‚ç‚¹åˆ‡æ¢&lt;/p>
&lt;p>åŸç†ç®€è¿°ï¼š&lt;/p>
&lt;ol>
&lt;li>ç¡®è®¤ä¸»èŠ‚ç‚¹å¤±æ•ˆã€‚ä¸€èˆ¬åŸºäºè¶…æ—¶æœºåˆ¶åˆ¤æ–­ï¼ŒèŠ‚ç‚¹é—´å¿ƒè·³åŒ…å¦‚æœè¶…è¿‡ä¸€æ®µæ—¶é—´æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œåˆ™è§†ä¸ºèŠ‚ç‚¹å¤±æ•ˆ&lt;/li>
&lt;li>é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹ã€‚ä»èŠ‚ç‚¹ä¹‹é—´é€‰ä¸¾ï¼ˆè¶…è¿‡åŠæ•°èŠ‚ç‚¹è¾¾åˆ°å…±è¯†ï¼‰ï¼Œç›®æ ‡æ˜¯é€‰ä¸¾å‡ºä¸ä¸»èŠ‚ç‚¹æ•°æ®å·®å¼‚æœ€å°çš„ä¸€ä¸ªä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ã€‚è¿™é‡Œæ¶‰åŠåˆ°å…±è¯†ç®—æ³•ï¼Œå¸¸è§çš„æœ‰Raftç­‰&lt;/li>
&lt;li>é‡æ–°é…ç½®ç³»ç»Ÿæ¿€æ´»ä¸»èŠ‚ç‚¹ã€‚ä¸»è¦å°±æ˜¯å®¢æˆ·ç«¯çš„æ•°æ®å†™è¯·æ±‚ç°åœ¨åº”è¯¥è·¯ç”±åˆ°æ–°æ™‹å‡çš„ä¸»èŠ‚ç‚¹ã€‚å‰ä¸»èŠ‚ç‚¹é‡æ–°ä¸Šçº¿åè¿˜è¦ç¡®ä¿å…¶é™çº§ä¸ºä»èŠ‚ç‚¹ï¼Œå¹¶è®¤å¯æ–°çš„ä¸»èŠ‚ç‚¹&lt;/li>
&lt;/ol>
&lt;p>å­˜åœ¨çš„é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>å‰ä¸»èŠ‚ç‚¹é‡æ–°ä¸Šçº¿åï¼Œå¯èƒ½ä¾æ—§è®¤ä¸ºè‡ªå·±æ˜¯ä¸»èŠ‚ç‚¹ï¼Œä»è€Œä¼šç»§ç»­å°è¯•åŒæ­¥å…¶ä»–èŠ‚ç‚¹ï¼Œå¯¼è‡´æ–°ä¸»èŠ‚ç‚¹äº§ç”Ÿå†™å†²çª&lt;/li>
&lt;li>å¦‚æœæ•°æ®åº“éœ€è¦å’Œå…¶ä»–ç³»ç»Ÿç›¸åè°ƒï¼Œé‚£ä¹ˆä¸¢å¼ƒå†™å…¥å†…å®¹æ˜¯æå…¶å±é™©çš„æ“ä½œã€‚æ¯”å¦‚è¯´ä¸€ä¸ªMySQLé›†ç¾¤é‡‡ç”¨è‡ªå¢ä½œä¸ºä¸»é”®ï¼Œå¦‚æœä¸€ä¸ªæ•°æ®æœªå®Œå…¨åŒæ­¥çš„MySQLä»èŠ‚ç‚¹æ™‹å‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨åç»­æ’å…¥è¡Œçš„æ“ä½œä¸‹ï¼Œæ–°ä¸»èŠ‚ç‚¹å°†ä¼šé‡æ–°åˆ†é…æ—§ä¸»èŠ‚ç‚¹å·²ç»åˆ†é…è¿‡çš„ä¸»é”®ã€‚å€˜è‹¥å¤–éƒ¨æœ‰ä¸€ä¸ªrediså¼•ç”¨äº†ä¸»é”®å­—æ®µï¼Œå°±ä¼šå‘ç”ŸMySQLä¸redisæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ&lt;/li>
&lt;li>æŸäº›æ•…éšœä¸‹ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå¤šä¸ªèŠ‚ç‚¹è®¤ä¸ºè‡ªå·±æ˜¯ä¸»èŠ‚ç‚¹ï¼Œè¿™ç§ç°è±¡ç§°ä¸º&lt;strong>è„‘è£‚ï¼ˆsplit brainï¼‰&lt;/strong>ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´å¤šä¸ªèŠ‚ç‚¹å¯å†™ï¼Œæœ€åå‡ºç°æ•°æ®å†²çªçš„æƒ…å†µ&lt;/li>
&lt;li>èŠ‚ç‚¹å¤±æ•ˆçš„è¶…æ—¶æ£€æµ‹æœºåˆ¶å¾ˆéš¾è®¾ç½®ä¸€ä¸ªåˆé€‚çš„æ—¶é—´ï¼Œæ—¶é—´è¶Šé•¿ä»£è¡¨æ€»ä½“æ¢å¤æ—¶é—´è¶Šé•¿ï¼Œæ—¶é—´è¶ŠçŸ­ï¼Œè¶Šå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ‡æ¢&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å¤åˆ¶æ—¥å¿—çš„å®ç°&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åŸºäºè¯­å¥çš„å¤åˆ¶&lt;/p>
&lt;p>ä¸»èŠ‚ç‚¹è®°å½•æ¯æ¬¡å†™è¯·æ±‚æ‰€æ‰§è¡Œçš„è¯­å¥ï¼Œå¹¶å°†è¯­å¥æ—¥å¿—å‘é€ç»™ä»èŠ‚ç‚¹ã€‚å¯¹äºå…³ç³»æ•°æ®åº“ï¼Œæ¯ä¸ªINSERTã€UPDATEæˆ–DELETEè¯­å¥éƒ½ä¼šè½¬å‘ç»™ä»èŠ‚ç‚¹ï¼Œç„¶åäº¤ç”±ä»èŠ‚ç‚¹æ‰§è¡Œã€‚&lt;/p>
&lt;p>æœ‰ä¸‹åˆ—å‡ ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>ä»»ä½•éç¡®å®šå‡½æ•°è¯­å¥æ¯”å¦‚NOW()ã€RAND()ï¼Œåœ¨ä¸åŒèŠ‚ç‚¹ä¸Šå¯èƒ½æœ‰ä¸åŒè¿”å›å€¼&lt;/li>
&lt;li>å¦‚æœè¯­å¥ä½¿ç”¨äº†è‡ªå¢ç­‰ä¾èµ–ç°æœ‰æ•°æ®çš„æƒ…å†µï¼Œä¼šå—åˆ°é™åˆ¶&lt;/li>
&lt;li>æœ‰å‰¯ä½œç”¨çš„è¯­å¥ï¼Œæ¯”å¦‚è§¦å‘å™¨ã€ç”¨æˆ·å®šä¹‰å‡½æ•°ç­‰ï¼Œä¸åŒèŠ‚ç‚¹ä¼šäº§ç”Ÿä¸åŒçš„å‰¯ä½œç”¨&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åŸºäºé¢„å†™æ—¥å¿—ï¼ˆWALï¼‰ä¼ è¾“&lt;/p>
&lt;p>Write-ahead loggingï¼Œæ‰€æœ‰çš„ä¿®æ”¹åœ¨æäº¤ä¹‹å‰éƒ½è¦å…ˆå†™å…¥logæ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ—¥å¿—æ–‡ä»¶å¤åˆ¶ä¸€ä¸ªå†…å®¹å’Œä¸»èŠ‚ç‚¹å®Œå…¨ç›¸åŒçš„å‰¯æœ¬ã€‚&lt;/p>
&lt;p>æœ‰ä¸‹åˆ—é—®é¢˜ï¼š&lt;/p>
&lt;p>æ—¥å¿—è®°å½•çš„æ•°æ®éå¸¸åº•å±‚ï¼ŒWALåŒ…å«å“ªäº›ç£ç›˜å—ä¸­çš„å“ªäº›å­—èŠ‚å‘ç”Ÿäº†æ›´æ”¹ã€‚è¿™ä½¿å¤åˆ¶ä¸å­˜å‚¨å¼•æ“ç´§å¯†è€¦åˆã€‚å¦‚æœæ•°æ®åº“å°†å…¶å­˜å‚¨æ ¼å¼ä»ä¸€ä¸ªç‰ˆæœ¬æ›´æ”¹ä¸ºå¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œé€šå¸¸ä¸å¯èƒ½åœ¨ä¸»åº“å’Œä»åº“ä¸Šè¿è¡Œä¸åŒç‰ˆæœ¬çš„æ•°æ®åº“è½¯ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŸºäºè¡Œçš„é€»è¾‘æ—¥å¿—å¤åˆ¶&lt;/p>
&lt;p>å…³ç³»æ•°æ®åº“çš„é€»è¾‘æ—¥å¿—é€šå¸¸æ˜¯ä»¥è¡Œçš„ç²’åº¦æè¿°å¯¹æ•°æ®åº“è¡¨çš„å†™å…¥çš„è®°å½•åºåˆ—ï¼š&lt;/p>
&lt;ul>
&lt;li>å¯¹äºæ’å…¥çš„è¡Œï¼Œæ—¥å¿—åŒ…å«æ‰€æœ‰åˆ—çš„æ–°å€¼ã€‚&lt;/li>
&lt;li>å¯¹äºåˆ é™¤çš„è¡Œï¼Œæ—¥å¿—åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥å”¯ä¸€æ ‡è¯†å·²åˆ é™¤çš„è¡Œã€‚é€šå¸¸æ˜¯ä¸»é”®ï¼Œä½†æ˜¯å¦‚æœè¡¨ä¸Šæ²¡æœ‰ä¸»é”®ï¼Œåˆ™éœ€è¦è®°å½•æ‰€æœ‰åˆ—çš„æ—§å€¼ã€‚&lt;/li>
&lt;li>å¯¹äºæ›´æ–°çš„è¡Œï¼Œæ—¥å¿—åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥å”¯ä¸€æ ‡è¯†æ›´æ–°çš„è¡Œï¼Œä»¥åŠæ‰€æœ‰åˆ—çš„æ–°å€¼ï¼ˆæˆ–è‡³å°‘æ‰€æœ‰å·²æ›´æ”¹çš„åˆ—çš„æ–°å€¼ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åŸºäºè§¦å‘å™¨çš„å¤åˆ¶&lt;/p>
&lt;p>è§¦å‘å™¨æ”¯æŒæ³¨å†Œè‡ªå·±çš„åº”ç”¨å±‚ä»£ç ï¼Œå¯ä»¥å°†æ•°æ®æ›´æ”¹è®°å½•è®°å½•åˆ°ä¸€ä¸ªå•ç‹¬çš„è¡¨ä¸­ï¼Œç„¶ååœ¨åº”ç”¨å±‚è®¿é—®è¯¥è¡¨ï¼Œå¹¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼Œæ¯”å¦‚å°†æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ªç³»ç»Ÿ&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å¤åˆ¶æ»åé—®é¢˜&lt;/strong>&lt;/p>
&lt;p>å‰é¢è®¨è®ºè¿‡ï¼Œå®è·µä¸­ä¸»ä»å¤åˆ¶ä¸€èˆ¬é‡‡ç”¨åŠåŒæ­¥æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨ä¸€ä¸ªåŒæ­¥èŠ‚ç‚¹å’Œå¤šä¸ªå¼‚æ­¥èŠ‚ç‚¹ã€‚è€Œå¼‚æ­¥å°±æ„å‘³ç€æ•°æ®çš„éå³æ—¶æ€§ã€‚ä¸€ä¸ªå®¢æˆ·ç«¯åŒæ—¶æŸ¥è¯¢ä¸»èŠ‚ç‚¹å’Œä¸€ä¸ªå¼‚æ­¥ä»èŠ‚ç‚¹å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœï¼Œè¿™å°±æ˜¯å¼‚æ­¥å¤åˆ¶æ‰€å¸¦æ¥çš„å¤åˆ¶æ»åé—®é¢˜ã€‚&lt;/p>
&lt;p>å°½ç®¡å¦‚æœä¸»èŠ‚ç‚¹åœæ­¢å†™å…¥ä¸€æ®µæ—¶é—´ï¼Œä»èŠ‚ç‚¹ä¼šé€šè¿‡è¿½èµ¶è¿‡ç¨‹ï¼Œæœ€ç»ˆä¼šè¾¾åˆ°ä¸ä¸»èŠ‚ç‚¹æ•°æ®ä¸€è‡´ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ï¼Œä½†æ˜¯å½“æ»åæ—¶é—´è¿‡é•¿ï¼Œå°†ä¼šå‘ç”Ÿå¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¯»è‡ªå·±çš„å†™&lt;/p>
&lt;p>&lt;img src="images/ddia-3.png" alt="">&lt;/p>
&lt;p>ç”¨æˆ·åœ¨æäº¤ä¸€äº›æ•°æ®åå†æ¬¡è¯»å–æäº¤çš„æ•°æ®æ—¶ï¼Œç”±äºå¯èƒ½åœ¨ä¸€ä¸ªæ•°æ®å°šæœªåŒæ­¥çš„ä»èŠ‚ç‚¹ï¼ˆFollower2ï¼‰è¿›è¡Œè¯»å–ï¼Œä¼šäº§ç”Ÿâ€œæ•°æ®ä¼¼ä¹ä¸¢å¤±â€çš„å‡è±¡ã€‚&lt;/p>
&lt;p>æ­¤æ—¶éœ€è¦&lt;strong>read-after-write ä¸€è‡´æ€§&lt;/strong>ï¼ˆå†™åè¯»ä¸€è‡´æ€§ã€è¯»å†™ä¸€è‡´æ€§ï¼‰æ¥é˜²æ­¢è¿™ç§ç°è±¡ã€‚&lt;/p>
&lt;p>é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆï¼š&lt;/p>
&lt;ol>
&lt;li>åœ¨ä¸»èŠ‚ç‚¹è®¿é—®å¯èƒ½è¢«ç”¨æˆ·è‡ªå·±ä¿®æ”¹çš„å†…å®¹ï¼Œå¦åˆ™å°±åœ¨ä»èŠ‚ç‚¹è®¿é—®&lt;/li>
&lt;li>è·Ÿè¸ªæœ€è¿‘æ›´æ–°æ—¶é—´ï¼Œè®¾å®šä¸€ä¸ªé˜ˆå€¼mï¼Œç”¨æˆ·æ›´æ–°åmåˆ†é’Ÿå†…ï¼ŒæŸ¥è¯¢è¯·æ±‚éƒ½å°†ç”±ä¸»èŠ‚ç‚¹å¤„ç†ï¼Œå¦åˆ™åœ¨ä»èŠ‚ç‚¹å¤„ç†ï¼›åŒæ—¶ç›‘æ§ä»èŠ‚ç‚¹ï¼Œé¿å…ä»å¤åˆ¶æ»åè¶…è¿‡måˆ†é’Ÿçš„èŠ‚ä»èŠ‚ç‚¹è¯»å–ã€‚&lt;/li>
&lt;li>å®¢æˆ·ç«¯è®°å½•ç”¨æˆ·æ›´æ–°æ—¶é—´æˆ³ï¼Œå¹¶é™„å¸¦åœ¨è¯·æ±‚ä¸­ï¼ŒæœåŠ¡ç«¯æ‰¾åˆ°æ‹¥æœ‰æ­¤æ—¶é—´æˆ³æ•°æ®çš„èŠ‚ç‚¹åï¼Œå°±ç”±æ­¤èŠ‚ç‚¹å¤„ç†è¯·æ±‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>å•è°ƒè¯»&lt;/p>
&lt;p>&lt;img src="images/ddia-4.png" alt="">&lt;/p>
&lt;p>å¦‚æœç”¨æˆ·ä»ä¸åŒä»åº“ï¼ˆä¸€ä¸ªæ–°ä¸€ä¸ªæ—§ï¼‰è¿›è¡Œå¤šæ¬¡è¯»å–ï¼Œå°±å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µ&lt;/p>
&lt;p>&lt;strong>å•è°ƒè¯»ä¸€è‡´æ€§&lt;/strong>å¯ä»¥é¿å…æ­¤å¼‚å¸¸ï¼Œæ­¤ç§ä¸€è‡´æ€§æ¯”å¼ºä¸€è‡´æ€§å¼±ï¼Œæ¯”æœ€ç»ˆä¸€è‡´æ€§å¼ºï¼Œå®ç°å•è°ƒè¯»ä¸€è‡´æ€§çš„ä¸€ç§å®ç°æ–¹å¼æ˜¯ï¼Œåˆ©ç”¨ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦è¿›è¡Œhashï¼Œä»è€Œå°†ç”¨æˆ·åˆ†é…åˆ°ä¸€ä¸ªå›ºå®šçš„èŠ‚ç‚¹ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‰ç¼€ä¸€è‡´è¯»&lt;/p>
&lt;p>&lt;img src="images/ddia-5.png" alt="">&lt;/p>
&lt;p>å¦‚æœæŸäº›åˆ†åŒºçš„å¤åˆ¶é€Ÿåº¦æ…¢äºå…¶ä»–åˆ†åŒºï¼Œé‚£ä¹ˆè§‚å¯Ÿè€…åœ¨çœ‹åˆ°é—®é¢˜ä¹‹å‰å¯èƒ½ä¼šçœ‹åˆ°ç­”æ¡ˆã€‚&lt;/p>
&lt;p>**å‰ç¼€ä¸€è‡´è¯»ï¼ˆconsistent prefix readsï¼‰**å¯ä»¥é¿å…æ­¤ç§å¼‚å¸¸ã€‚&lt;/p>
&lt;p>è¿™æ˜¯åˆ†åŒºï¼ˆpartitionedï¼‰ï¼ˆåˆ†ç‰‡ï¼ˆshardedï¼‰ï¼‰æ•°æ®åº“ä¸­çš„ä¸€ä¸ªç‰¹æ®Šé—®é¢˜ï¼Œä¸åŒçš„åˆ†åŒºç‹¬ç«‹è¿è¡Œï¼Œå› æ­¤ä¸å­˜åœ¨å…¨å±€å†™å…¥é¡ºåºï¼Œä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ç¡®ä¿ä»»ä½•å› æœç›¸å…³çš„å†™å…¥éƒ½å†™å…¥ç›¸åŒçš„åˆ†åŒºï¼Œä½†æ˜¯è¿™å°±ä¸åˆ†åŒºçš„æ€æƒ³ç›¸è¿èƒŒäº†ï¼Œåœ¨åç»­â€Happens-beforeå…³ç³»ä¸å¹¶å‘å°èŠ‚â€œå°†ä»‹ç»ä¸€ä¸ªè¿½è¸ªäº‹ä»¶å› æœå…³ç³»çš„ç®—æ³•ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="å¤šä¸»èŠ‚ç‚¹å¤åˆ¶">å¤šä¸»èŠ‚ç‚¹å¤åˆ¶&lt;/h3>
&lt;p>æ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½å¯ä»¥æ¥å—å†™æ“ä½œï¼Œå¹¶å°†å†™æ“ä½œè½¬å‘ç»™å…¶ä»–èŠ‚ç‚¹ã€‚åŒæ—¶æ¯ä¸ªä¸»èŠ‚ç‚¹æ‰®æ¼”å…¶ä»–ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>&lt;strong>å¤„ç†å†™å†²çª&lt;/strong>&lt;/p>
&lt;p>&lt;img src="images/ddia-6.png" alt="">&lt;/p>
&lt;p>ä¸¤ä¸ªç”¨æˆ·çš„å†™æ“ä½œéƒ½æˆåŠŸäº†ï¼Œä½†æ˜¯åœ¨åç»­ä¸»èŠ‚ç‚¹é—´åŒæ­¥æ—¶å‡ºç°äº†å†™å†²çª&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é¿å…å†²çª&lt;/p>
&lt;p>åº”ç”¨å±‚ä¿è¯å†™è¯·æ±‚æ€»æ˜¯è¢«è·¯ç”±åˆ°åŒä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œå±€é™æ€§é«˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ”¶æ•›äºä¸€è‡´çŠ¶æ€&lt;/p>
&lt;p>åœ¨ä¸»ä»å¤åˆ¶æ¨¡å‹ä¸‹ï¼Œå†™è¯·æ±‚æ˜¯ç¬¦åˆé¡ºåºæ€§åŸåˆ™çš„ï¼Œä½†åœ¨å¤šä¸»èŠ‚ç‚¹æ¨¡å‹ä¸‹ä¸å­˜åœ¨è¿™ç§é¡ºåºæ€§ï¼Œé€šå¸¸æœ‰ä¸‹åˆ—å‡ ç§æ–¹å¼æ¥æ”¶æ•›äºä¸€è‡´çŠ¶æ€ï¼š&lt;/p>
&lt;ol>
&lt;li>ç»™æ¯ä¸ªå†™å…¥ä¸€ä¸ªå”¯ä¸€çš„IDï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªæ—¶é—´æˆ³ï¼Œä¸€ä¸ªé•¿çš„éšæœºæ•°ï¼Œä¸€ä¸ªUUIDæˆ–è€…ä¸€ä¸ªé”®å’Œå€¼çš„å“ˆå¸Œï¼‰ï¼ŒæŒ‘é€‰æœ€é«˜IDçš„å†™å…¥ä½œä¸ºèƒœåˆ©è€…ï¼Œå¹¶ä¸¢å¼ƒå…¶ä»–å†™å…¥ã€‚å¦‚æœä½¿ç”¨æ—¶é—´æˆ³ï¼Œè¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºæœ€åå†™å…¥èƒœåˆ©ï¼ˆLWW, last write winsï¼‰ã€‚è™½ç„¶è¿™ç§æ–¹æ³•å¾ˆæµè¡Œï¼Œä½†æ˜¯å¾ˆå®¹æ˜“é€ æˆæ•°æ®ä¸¢å¤±ã€‚&lt;/li>
&lt;li>ä¸ºæ¯ä¸ªå‰¯æœ¬åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„IDï¼ŒIDç¼–å·æ›´é«˜çš„å†™å…¥å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚è¿™ç§æ–¹æ³•ä¹Ÿæ„å‘³ç€æ•°æ®ä¸¢å¤±ã€‚&lt;/li>
&lt;li>ä»¥æŸç§æ–¹å¼å°†è¿™äº›å€¼åˆå¹¶åœ¨ä¸€èµ· - ä¾‹å¦‚ï¼ŒæŒ‰å­—æ¯é¡ºåºæ’åºï¼Œç„¶åè¿æ¥å®ƒä»¬ï¼Œåœ¨ä¸Šå›¾ä¸­ï¼Œåˆå¹¶çš„æ ‡é¢˜å¯èƒ½ç±»ä¼¼äºâ€œB/Câ€ï¼‰ã€‚&lt;/li>
&lt;li>ç”¨ä¸€ç§å¯ä¿ç•™æ‰€æœ‰ä¿¡æ¯çš„æ˜¾å¼æ•°æ®ç»“æ„æ¥è®°å½•å†²çªï¼Œå¹¶ç¼–å†™è§£å†³å†²çªçš„åº”ç”¨ç¨‹åºä»£ç ï¼ˆä¹Ÿè®¸é€šè¿‡æç¤ºç”¨æˆ·çš„æ–¹å¼ï¼‰ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>è‡ªå®šä¹‰å†²çªè§£å†³é€»è¾‘&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨å†™å…¥æ—¶æ‰§è¡Œ&lt;/p>
&lt;p>åªè¦æ•°æ®åº“åœ¨å¤åˆ¶å˜æ›´æ—¥å¿—æ—¶æ£€æµ‹åˆ°äº†å†²çªï¼Œå°±è°ƒç”¨åº”ç”¨å±‚å†²çªå¤„ç†ç¨‹åº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨è¯»å–æ—¶æ‰§è¡Œ&lt;/p>
&lt;p>æ‰€æœ‰å†²çªå€¼éƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œä¸‹ä¸€æ¬¡è¯»å–æ•°æ®æ—¶ï¼Œå°†è¿™äº›å†²çªå€¼éƒ½è¿”å›ç»™åº”ç”¨å±‚ï¼Œäº¤ç”±åº”ç”¨å±‚å¤„ç†&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ‹“æ‰‘ç»“æ„&lt;/strong>&lt;/p>
&lt;p>&lt;img src="images/ddia-7.png" alt="">&lt;/p>
&lt;p>ä¸Šå›¾ä¸ºå¤šä¸»èŠ‚ç‚¹æ¨¡å‹çš„ä¸‰ç§æ‹“æ‰‘ç»“æ„&lt;/p>
&lt;p>åœ¨ç¯å½¢æ‹“æ‰‘ï¼ˆaï¼‰å’Œæ˜Ÿå½¢æ‹“æ‰‘ï¼ˆbï¼‰ä¸­ï¼Œå†™è¯·æ±‚éƒ½è¦ç»è¿‡å¤šä¸ªèŠ‚ç‚¹çš„ä¼ é€’æ‰èƒ½åˆ°è¾¾æ‰€æœ‰èŠ‚ç‚¹ã€‚å¹¶ä¸”æ¯ä¸ªè¯·æ±‚éƒ½é™„å¸¦äº†å·²é€šè¿‡çš„èŠ‚ç‚¹æ ‡è¯†ç¬¦ï¼Œä¾æ­¤æ¥é¿å…è¯·æ±‚ä¼ é€’çš„æ— çº¿å¾ªç¯ã€‚åœ¨è¿™ä¸¤ä¸ªæ‹“æ‰‘ç±»å‹ä¸­ï¼Œå¦‚æœæœ‰èŠ‚ç‚¹å‘ç”Ÿäº†æ•…éšœï¼Œå°†å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå¤åˆ¶æ—¥å¿—çš„è½¬å‘å—åˆ°å½±å“ã€‚è€Œå…¨éƒ¨-å…¨éƒ¨æ‹“æ‰‘æ¨¡å‹ï¼ˆcï¼‰ä¸­ï¼Œè¯·æ±‚å¯ä»¥é€šè¿‡å¤šç§ä¸åŒè·¯å¾„è½¬å‘ï¼Œé¿å…äº†å•ç‚¹æ•…éšœï¼Œæé«˜äº†å®¹é”™æ€§ã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸ªè¯·æ±‚åˆ°è¾¾é¡ºåºé—®é¢˜ï¼š&lt;/p>
&lt;p>&lt;img src="images/ddia-8.png" alt="">&lt;/p>
&lt;p>ç”±äºç½‘ç»œé˜»å¡ç­‰åŸå› ï¼Œå¯¹äºåŒä¸€ä¸ªä¸»é”®çš„updateæ“ä½œå…ˆäºinsertæ“ä½œåˆ°è¾¾äº†ä¸»èŠ‚ç‚¹2äº†ï¼Œè¿™é‡Œä¸ºäº†ä½¿å¾—æ¶ˆæ¯æ­£ç¡®æœ‰åºï¼Œå¯ä»¥ä½¿ç”¨&lt;strong>ç‰ˆæœ¬çŸ¢é‡&lt;/strong>æŠ€æœ¯ï¼Œåæ–‡ä»‹ç»ã€‚&lt;/p>
&lt;h3 id="æ— ä¸»èŠ‚ç‚¹å¤åˆ¶">æ— ä¸»èŠ‚ç‚¹å¤åˆ¶&lt;/h3>
&lt;p>æ— ä¸»èŠ‚ç‚¹å¤åˆ¶æ–¹æ¡ˆä¸­ï¼Œå®¢æˆ·ç«¯å°†å†™è¯·æ±‚ç›´æ¥å‘é€åˆ°å¤šä¸ªå‰¯æœ¬ï¼Œæ ‡æ†ï¼šäºšé©¬é€ŠDynamoç³»ç»Ÿ&lt;/p>
&lt;p>&lt;strong>èŠ‚ç‚¹å¤±æ•ˆæ—¶å†™å…¥æ•°æ®åº“&lt;/strong>&lt;/p>
&lt;p>åœ¨ä¸‹å›¾ä¸­&lt;/p>
&lt;ol>
&lt;li>ä¸€æ¬¡å†™è¯·æ±‚åŒæ—¶å‘é€ç»™äº†ä¸‰ä¸ªå‰¯æœ¬ï¼Œå…¶ä¸­å‰¯æœ¬ä¸‰æ•…éšœä¸‹çº¿äº†ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„æˆåŠŸå“åº”å°±è®¤ä¸ºå†™å…¥æˆåŠŸ&lt;/li>
&lt;li>æ•…éšœèŠ‚ç‚¹é‡æ–°ä¸Šçº¿åï¼Œä¸ºäº†é¿å…è¯»å–åˆ°æ—§æ•°æ®ï¼Œå®¢æˆ·ç«¯åŒæ ·å¹¶å‘åœ°å‘å¤šä¸ªèŠ‚ç‚¹å‘é€è¯»è¯·æ±‚&lt;/li>
&lt;li>å®¢æˆ·ç«¯å¯èƒ½è¯»åˆ°ä¸åŒçš„ç»“æœï¼Œä¸ºäº†ç¡®å®šå“ªä¸ªæ˜¯æœ€æ–°å€¼ï¼Œå¼•å…¥ç‰ˆæœ¬å·æŠ€æœ¯&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="images/ddia-9.png" alt="">&lt;/p>
&lt;p>&lt;strong>è¯»ä¿®å¤å’Œåç†µ&lt;/strong>&lt;/p>
&lt;p>åœ¨ä¸Šå›¾æœ€åï¼Œå®¢æˆ·ç«¯å°†è¯»å–åˆ°çš„æœ€æ–°å€¼æœ‰é‡æ–°å†™å›äº†è½åå‰¯æœ¬ï¼Œè¿™ä¸ªæ–¹æ¡ˆç§°ä¸º&lt;strong>è¯»ä¿®å¤&lt;/strong>ï¼Œä¸»è¦é€‚åˆé¢‘ç¹è¯»å–çš„åœºæ™¯ã€‚&lt;/p>
&lt;p>æ­¤å¤–è¿˜æœ‰ä¸€ç§æœºåˆ¶è¢«ç»å¸¸åº”ç”¨äºæ— ä¸»èŠ‚ç‚¹ç³»ç»Ÿçš„&lt;strong>è¿½èµ¶&lt;/strong>è¿‡ç¨‹ï¼Œ**åç†µã€‚**ä¸€äº›æ•°æ®å­˜å‚¨å…·æœ‰ä¸æ–­æŸ¥æ‰¾å‰¯æœ¬ä¹‹é—´çš„æ•°æ®å·®å¼‚çš„åå°è¿›ç¨‹ï¼Œå¹¶å°†ä»»ä½•ç¼ºå°‘çš„æ•°æ®ä»ä¸€ä¸ªå‰¯æœ¬å¤åˆ¶åˆ°å¦ä¸€ä¸ªå‰¯æœ¬ã€‚ä¸ä¸»ä»å¤åˆ¶ä¸­çš„å¤åˆ¶æ—¥å¿—ä¸åŒï¼Œæ­¤åç†µè¿‡ç¨‹ä¸ä¼šä»¥ä»»ä½•ç‰¹å®šçš„é¡ºåºå¤åˆ¶å†™å…¥ï¼Œå¹¶ä¸”åœ¨å¤åˆ¶æ•°æ®ä¹‹å‰å¯èƒ½ä¼šæœ‰æ˜¾è‘—çš„å»¶è¿Ÿã€‚&lt;/p>
&lt;p>&lt;strong>è¯»å†™quorum&lt;/strong>&lt;/p>
&lt;p>å‡è®¾æœ‰nä¸ªå‰¯æœ¬ï¼Œå†™å…¥éœ€è¦wä¸ªèŠ‚ç‚¹ç¡®è®¤ï¼Œè¯»å–è‡³å°‘éœ€è¦é€šè¿‡rä¸ªèŠ‚ç‚¹æŸ¥è¯¢ï¼Œé‚£ä¹ˆn,w,rä¸‰è€…çš„å…³ç³»åº”è¯¥æ˜¯æ€æ ·çš„ï¼Ÿå¯ä»¥å¾ˆç®€å•çš„å¾—åˆ°&lt;code>n &amp;lt; w + r&lt;/code> ï¼Œåªæœ‰è¿™æ ·è¯»è¯·æ±‚æ‰èƒ½ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ªç»“æœæ˜¯æœ€æ–°å€¼ã€‚æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„w,ræˆ‘ä»¬ç§°ä¹‹ä¸º**ä»²è£å†™ï¼Œä»²è£è¯»ã€‚**é€šå¸¸ï¼Œè¯»å–å’Œå†™å…¥æ“ä½œæ€»æ˜¯å¹¶è¡Œåœ°å‘é€ç»™å…¨éƒ¨nä¸ªèŠ‚ç‚¹ï¼Œwå’Œråªæ˜¯å†³å®šéœ€è¦è¿”å›ç»“æœçš„èŠ‚ç‚¹æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>è¯»å¤šå†™å°‘ï¼šå¯ä»¥è®¾ç½®w=nï¼Œr=1&lt;/li>
&lt;li>è¯»å°‘å†™å¤šï¼šå¯ä»¥è®¾ç½®w=1ï¼Œr=n&lt;/li>
&lt;/ul>
&lt;p>å½“ç„¶ä¸Šè¿°ä¸¤ç§æ–¹æ¡ˆéƒ½æ˜¯æœ€æç«¯çš„è®¾ç½®ï¼Œéœ€è¦æ‰¿æ‹…å•ç‚¹æ•…éšœçš„é£é™©ï¼Œå¯ä»¥æ ¹æ®æƒ…å†µé€‚å½“è°ƒæ•´wï¼Œrå€¼&lt;/p>
&lt;p>&lt;strong>quorumä¸€è‡´æ€§çš„å±€é™æ€§&lt;/strong>&lt;/p>
&lt;p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè®¾å®šw+r&amp;gt;nå¯ä»¥ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ªæœ€æ–°å€¼è¢«è¯»å–åˆ°&lt;/p>
&lt;p>ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®w+râ‰¤nï¼Œè™½ç„¶è¯»å–è¯·æ±‚æœ€ç»ˆå¯èƒ½è¿”å›ä¸€ä¸ªæ—§å€¼ï¼Œä½†æ˜¯è¿™æ ·çš„é…ç½®èƒ½å¤Ÿè·å¾—æ›´ä½çš„å»¶è¿Ÿå’Œæ›´é«˜çš„å¯ç”¨æ€§ï¼Œæ¯”è¾ƒé€‚åˆå¯¹æ•°æ®å®æ—¶æ€§è¦æ±‚æ²¡é‚£ä¹ˆé«˜çš„åœºæ™¯&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿è®¾å®šw+r&amp;gt;nï¼Œ ä¹Ÿå¯èƒ½å­˜åœ¨è¿”å›æ—§å€¼çš„è¾¹ç•Œæ¡ä»¶ï¼š&lt;/p>
&lt;ol>
&lt;li>å¦‚æœé‡‡ç”¨äº†sloppy quorumï¼ˆåé¢ä¼šè®²ï¼‰ï¼Œwä¸ªå†™å…¥å’Œrä¸ªè¯»å–å¯èƒ½è½åœ¨å®Œå…¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œå°±æ— æ³•ä¿è¯è¯»åˆ°æœ€æ–°å€¼&lt;/li>
&lt;li>å¦‚æœä¸¤ä¸ªå†™å…¥åŒæ—¶å‘ç”Ÿï¼Œä¸æ¸…æ¥šå“ªä¸€ä¸ªå…ˆå‘ç”Ÿã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå”¯ä¸€å®‰å…¨çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆå¹¶å¹¶å‘å†™å…¥ï¼ˆå¤„ç†å†™å…¥å†²çªï¼‰ã€‚å¦‚æœæ ¹æ®æ—¶é—´æˆ³ï¼ˆæœ€åå†™å…¥èƒœåˆ©ï¼‰æŒ‘é€‰å‡ºä¸€ä¸ªèƒœè€…ï¼Œåˆ™ç”±äºæ—¶é’Ÿåå·®å†™å…¥å¯èƒ½ä¼šä¸¢å¤±ã€‚&lt;/li>
&lt;li>å¦‚æœå†™æ“ä½œä¸è¯»æ“ä½œåŒæ—¶å‘ç”Ÿï¼Œå†™æ“ä½œå¯èƒ½ä»…åæ˜ åœ¨æŸäº›å‰¯æœ¬ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ç¡®å®šè¯»å–æ˜¯è¿”å›æ—§å€¼è¿˜æ˜¯æ–°å€¼ã€‚&lt;/li>
&lt;li>å¦‚æœå†™æ“ä½œåœ¨æŸäº›å‰¯æœ¬ä¸ŠæˆåŠŸï¼Œè€Œåœ¨å…¶ä»–èŠ‚ç‚¹ä¸Šå¤±è´¥ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºæŸäº›èŠ‚ç‚¹ä¸Šçš„ç£ç›˜å·²æ»¡ï¼‰ï¼Œä¸”æˆåŠŸçš„æ•°é‡å°äºwï¼Œæ‰€ä»¥ç³»ç»Ÿåˆ¤å®šå†™å…¥å¤±è´¥ï¼Œä½†æ˜¯å†™å…¥æˆåŠŸçš„å‰¯æœ¬å¹¶ä¸ä¼šå›æ»šå†™å…¥çš„æ•°æ®ã€‚è¿™æ„å‘³ç€å°½ç®¡å†™å…¥å¤±è´¥ï¼Œåç»­çš„è¯»å–ä»ç„¶å¯èƒ½ä¼šè¯»å–è¿™æ¬¡å¤±è´¥å†™å…¥çš„å€¼ã€‚&lt;/li>
&lt;li>å¦‚æœå…·æœ‰æ–°å€¼çš„èŠ‚ç‚¹å‘ç”Ÿå¤±æ•ˆï¼Œæ¢å¤é‡å¯æ—¶ï¼Œæ¢å¤æ•°æ®æ¥è‡ªæ—§å€¼ï¼Œåˆ™å…·æœ‰æ–°å€¼çš„å‰¯æœ¬æ•°å°†å°äºwï¼Œæ‰“ç ´äº†quorumæ¡ä»¶&lt;/li>
&lt;li>å³ä½¿ä¸€åˆ‡å·¥ä½œæ­£å¸¸ï¼Œæœ‰æ—¶ä¹Ÿä¼šå‡ºç°ä¸€äº›è¾¹ç•Œæƒ…å†µï¼Œä¹¦ä¸­ç¬¬ä¹ç« å¯çº¿æ€§åŒ–ä¸quorumæœ‰ä»‹ç»&lt;/li>
&lt;/ol>
&lt;p>è¿™é‡Œä¾æ—§å­˜åœ¨å‰æ–‡â€œå¤åˆ¶æ»åé—®é¢˜â€ä¸­æ‰€åˆ—ä¸¾å‡ºçš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œå¦‚æœç¡®å®éœ€è¦æ›´å¼ºçš„ä¿è¯ï¼Œå°±éœ€è¦&lt;strong>äº‹åŠ¡&lt;/strong>ä¸&lt;strong>å…±è¯†&lt;/strong>çš„é—®é¢˜äº†ã€‚&lt;/p>
&lt;p>&lt;strong>å®½æ¾çš„quorumï¼ˆsloppy quorumï¼‰ä¸æ•°æ®å›ä¼ &lt;/strong>&lt;/p>
&lt;p>å†™å’Œè¯»ä»ç„¶éœ€è¦wå’ŒræˆåŠŸçš„å“åº”ï¼Œä½†æ˜¯å¯èƒ½åŒ…æ‹¬ä¸åœ¨æŒ‡å®šçš„nä¸ªèŠ‚ç‚¹ä¸­çš„ä¸´æ—¶èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>è¯¦ç»†ç‚¹æ¥è¯´å°±æ˜¯å½“å®¢æˆ·ç«¯å‘æŒ‡å®šçš„nä¸ªèŠ‚ç‚¹ä¸­å†™å…¥æ—¶ï¼Œæ— æ³•å¾—åˆ°wä¸ªèŠ‚ç‚¹çš„å“åº”ï¼Œé‚£ä¹ˆç³»ç»Ÿå…è®¸å°†å¤±è´¥çš„é‚£äº›å†™è¯·æ±‚å†™å…¥åˆ°ä¸´æ—¶èŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿˜æ˜¯åˆ¤å®šå†™æˆåŠŸã€‚ç­‰åˆ°èŠ‚ç‚¹æ¢å¤åï¼Œä¸´æ—¶èŠ‚ç‚¹å°±ä¼šå°†æš‚å­˜çš„å€¼å†™å›åˆ°åŸå§‹èŠ‚ç‚¹ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš&lt;strong>æ•°æ®å›ä¼ &lt;/strong>ã€‚&lt;/p>
&lt;p>ç”±æ­¤å¯è§ï¼Œåœ¨å®½æ¾çš„quorumä¸‹ï¼Œå³ä½¿æ»¡è¶³w+r&amp;gt;nï¼Œä¹Ÿä¸èƒ½ä¿è¯èƒ½å¤Ÿä¸€å®šè¯»å–åˆ°æ–°å€¼ã€‚ä½†æ˜¯å®ƒæé«˜äº†å¾ˆå¤§çš„å†™å…¥å¯ç”¨æ€§ã€‚&lt;/p>
&lt;p>æ‰€æœ‰Dynamoé£æ ¼çš„ç³»ç»Ÿéƒ½å·²ç»æ”¯æŒäº†sloppy quorumã€‚&lt;/p>
&lt;p>&lt;strong>æ£€æµ‹å¹¶å‘å†™&lt;/strong>&lt;/p>
&lt;p>ä¸å¤šä¸»èŠ‚ç‚¹å¤åˆ¶ç±»ä¼¼ï¼ˆè§å‰æ–‡ã€å¤„ç†å†™å†²çªã€‘ï¼‰ï¼Œæ— ä¸»èŠ‚ç‚¹å¤åˆ¶åœ¨å¹¶å‘å¯¹æŸä¸ªä¸»é”®è¿›è¡Œå†™æ—¶ï¼Œä¹Ÿä¼šå‡ºç°å†™å†²çªï¼Œæ­¤å¤–è¯»ä¿®å¤å’Œæ•°æ®å›ä¼ åŒæ ·ä¼šå¯¼è‡´å¹¶å‘å†™å†²çªã€‚&lt;/p>
&lt;p>&lt;img src="images/ddia-10.png" alt="">&lt;/p>
&lt;ul>
&lt;li>èŠ‚ç‚¹ 1 æ¥æ”¶æ¥è‡ª A çš„å†™å…¥ï¼Œä½†ç”±äºæš‚æ—¶ä¸­æ–­ï¼Œæ²¡æ¥æ”¶åˆ°æ¥è‡ª B çš„å†™å…¥ã€‚&lt;/li>
&lt;li>èŠ‚ç‚¹ 2 é¦–å…ˆæ¥æ”¶æ¥è‡ª A çš„å†™å…¥ï¼Œç„¶åæ¥æ”¶æ¥è‡ª B çš„å†™å…¥ã€‚&lt;/li>
&lt;li>èŠ‚ç‚¹ 3 é¦–å…ˆæ¥æ”¶æ¥è‡ª B çš„å†™å…¥ï¼Œç„¶åæ¥æ”¶æ¥è‡ª A å†™å…¥ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœåƒä¸Šé¢è¿‡ç¨‹ä¸€æ ·ï¼Œæ¯å½“æ¥æ”¶åˆ°ä¸€ä¸ªå†™å…¥è¯·æ±‚å°±ç®€å•çš„è¦†ç›–æ‰åŸæ¥çš„å€¼ï¼Œé‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿå°†è¾¾ä¸è¿‡åˆ°ä¸€è‡´çŠ¶æ€ã€‚&lt;/p>
&lt;p>åœ¨å‰æ–‡å¤šä¸»èŠ‚ç‚¹å¤„ç†å†™å†²çªå°èŠ‚ï¼Œæœ‰è¯´åˆ°â€œæ”¶æ•›äºä¸€è‡´æ€§çŠ¶æ€â€ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯æ¯ä¸ªå‰¯æœ¬æ€»æ˜¯ä¿å­˜æœ€æ–°å€¼ã€‚å¦‚æœä»¥å®¢æˆ·ç«¯æ—¶é—´æˆ³æ¥å®šä¹‰æœ€æ–°ï¼Œæˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸ºï¼š&lt;/p>
&lt;p>&lt;strong>æœ€åå†™å…¥è€…è·èƒœï¼ˆlast write winsï¼ŒLWWï¼‰&lt;/strong>&lt;/p>
&lt;p>LWWå¯ä»¥å®ç°æœ€ç»ˆæ”¶æ•›ï¼Œä½†æ˜¯ç‰ºç‰²äº†ä¸€å®šçš„æ•°æ®æŒä¹…æ€§ï¼Œå¦å¤–ç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­&lt;strong>ä¸å¯é æ—¶é’Ÿ&lt;/strong>çš„æŒ‘æˆ˜ï¼ŒLWWç”šè‡³ä¼šåˆ é™¤éå¹¶å‘å†™ã€‚&lt;/p>
&lt;p>å¯¹äºç¼“å­˜ç³»ç»Ÿï¼Œæ•°æ®æŒä¹…æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯LWWå€’æ˜¯æŒºé€‚åˆçš„ã€‚&lt;/p>
&lt;p>&lt;strong>Happens-beforeå…³ç³»å’Œå¹¶å‘&lt;/strong>&lt;/p>
&lt;p>å¦‚æœä¸€ä¸ªæ“ä½œå‘ç”Ÿåœ¨å¦ä¸€ä¸ªæ“ä½œä¹‹å‰ï¼Œåˆ™åé¢çš„æ“ä½œå¯ä»¥è¦†ç›–ä¹‹å‰çš„æ“ä½œï¼Œå±äºå› æœå…³ç³»ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œéƒ½ä¸åœ¨å¦ä¸€ä¸ªä¹‹å‰å‘ç”Ÿæˆ–è€…éƒ½ä¸çŸ¥é“å¯¹æ–¹çš„å‘ç”Ÿï¼Œé‚£ä¹ˆå°±å±äºå¹¶å‘å…³ç³»ï¼Œè¿™å°±éœ€è¦è§£å†³å¯èƒ½å‘ç”Ÿçš„å†™å…¥å†²çªã€‚&lt;/p>
&lt;p>&lt;strong>ç¡®å®šå‰åå…³ç³»&lt;/strong>&lt;/p>
&lt;p>&lt;img src="images/ddia-11.png" alt="">&lt;/p>
&lt;ul>
&lt;li>æœåŠ¡å™¨ä¸ºæ¯ä¸ªé”®ä¿ç•™ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å†™å…¥é”®æ—¶éƒ½å¢åŠ ç‰ˆæœ¬å·ï¼Œå¹¶å°†æ–°ç‰ˆæœ¬å·ä¸å†™å…¥çš„å€¼ä¸€èµ·å­˜å‚¨ã€‚&lt;/li>
&lt;li>å½“å®¢æˆ·ç«¯è¯»å–é”®æ—¶ï¼ŒæœåŠ¡å™¨å°†è¿”å›æ‰€æœ‰æœªè¦†ç›–çš„å€¼ä»¥åŠæœ€æ–°çš„ç‰ˆæœ¬å·ã€‚å®¢æˆ·ç«¯åœ¨å†™å…¥å‰å¿…é¡»å…ˆå‘é€è¯»å–è¯·æ±‚ã€‚&lt;/li>
&lt;li>å®¢æˆ·ç«¯å†™å…¥é”®æ—¶ï¼Œå¿…é¡»åŒ…å«ä¹‹å‰è¯»å–çš„ç‰ˆæœ¬å·ï¼Œå¹¶ä¸”å¿…é¡»å°†ä¹‹å‰è¯»å–çš„æ‰€æœ‰å€¼åˆå¹¶åœ¨ä¸€èµ·ã€‚æ¥è‡ªå†™å…¥è¯·æ±‚çš„å“åº”å¯ä»¥åƒè¯»å–ä¸€æ ·ï¼Œè¿”å›æ‰€æœ‰å½“å‰å€¼ã€‚&lt;/li>
&lt;li>å½“æœåŠ¡å™¨æ¥æ”¶åˆ°å…·æœ‰ç‰¹å®šç‰ˆæœ¬å·çš„å†™å…¥æ—¶ï¼Œå®ƒå¯ä»¥è¦†ç›–è¯¥ç‰ˆæœ¬å·æˆ–æ›´ä½ç‰ˆæœ¬çš„æ‰€æœ‰å€¼ï¼ˆå› ä¸ºå®ƒçŸ¥é“å®ƒä»¬å·²ç»è¢«åˆå¹¶åˆ°æ–°çš„å€¼ä¸­ï¼‰ï¼Œä½†æ˜¯å®ƒå¿…é¡»ä¿ç•™æ›´é«˜ç‰ˆæœ¬å·çš„å€¼ï¼ˆå› ä¸ºè¿™äº›å€¼ä¸å½“å‰çš„å†™æ“ä½œå±äºå¹¶å‘ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ç‰ˆæœ¬çŸ¢é‡&lt;/strong>&lt;/p>
&lt;p>ä¸Šè¿°è¿‡ç¨‹æ˜¯åªæœ‰ä¸€ä¸ªå‰¯æœ¬çš„æƒ…å†µï¼Œåœ¨æ­¤å‰¯æœ¬æœåŠ¡ç«¯å¼•å…¥ä¸€ä¸ªç‰ˆæœ¬å·æŠ€æœ¯å°±èƒ½å¤Ÿç¡®å®šå¤šä¸ªå†™è¯·æ±‚æ˜¯å±äºå› æœå…³ç³»è¿˜æ˜¯å¹¶å‘å…³ç³»ã€‚&lt;/p>
&lt;p>å¦‚æœæ‰©å±•åˆ°æ— ä¸»èŠ‚ç‚¹é›†ç¾¤ï¼Œç”±äºæ¯ä¸ªå‰¯æœ¬éƒ½èƒ½å¤Ÿæ¥å—å†™è¯·æ±‚ï¼Œé‚£ä¹ˆå•ä¸ªçš„ç‰ˆæœ¬å·å°±æ— æ³•æ»¡è¶³è¦æ±‚äº†ï¼Œè¿™å°±è¦æ±‚æ¯ä¸ªå‰¯æœ¬å’Œæ¯ä¸ªä¸»é”®éƒ½è¦ç»´æŠ¤ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œå¹¶ä¸”åŒæ—¶è¿˜è¦è·Ÿè¸ªå…¶ä»–å‰¯æœ¬çš„ç‰ˆæœ¬å·ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯æ‰èƒ½åˆ¤æ–­å†™è¯·æ±‚çš„ä¾èµ–å…³ç³»ã€‚&lt;/p>
&lt;p>æ‰€æœ‰å‰¯æœ¬çš„ç‰ˆæœ¬å·é›†åˆå°±è¢«æˆä¸ºæ˜¯&lt;strong>ç‰ˆæœ¬çŸ¢é‡ã€‚&lt;/strong>&lt;/p>
- https://ngtrio.com/posts/ddia/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>Raftä¸ZABå¯¹æ¯”</title><link>https://ngtrio.com/posts/raft%E4%B8%8Ezab%E5%AF%B9%E6%AF%94/</link><pubDate>Fri, 13 Aug 2021 08:29:23 +0800</pubDate><guid>https://ngtrio.com/posts/raft%E4%B8%8Ezab%E5%AF%B9%E6%AF%94/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/raft%E4%B8%8Ezab%E5%AF%B9%E6%AF%94/ -&lt;h2 id="zab">&lt;strong>ZAB&lt;/strong>&lt;/h2>
&lt;h3 id="zabèŠ‚ç‚¹çŠ¶æ€">&lt;strong>ZABèŠ‚ç‚¹çŠ¶æ€ï¼š&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>LOOKING&lt;/li>
&lt;li>FOLLOWING&lt;/li>
&lt;li>LEADING&lt;/li>
&lt;li>OBSERVING&lt;/li>
&lt;/ol>
&lt;h3 id="ä¸“æœ‰åè¯">&lt;strong>ä¸“æœ‰åè¯&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>electionEpochï¼šé€‰ä¸¾çš„é€»è¾‘æ—¶é’Ÿ&lt;/li>
&lt;li>peerEpochï¼šæ¯æ¬¡leaderé€‰ä¸¾å®Œæˆåä¼šé€‰å‡ºä¸€ä¸ªpeerEpoch&lt;/li>
&lt;li>zxidï¼šæ¯ä¸ªproposalçš„å”¯ä¸€idï¼Œé«˜32ä½ä¸ºpeerEpochä½32ä½ä¸ºcounter&lt;/li>
&lt;li>lastProcessedZxidï¼šæœ€åä¸€æ¬¡commitçš„zxid&lt;/li>
&lt;/ol>
&lt;h3 id="ç†è®ºå®ç°çš„å››ä¸ªé˜¶æ®µ">&lt;strong>ç†è®ºå®ç°çš„å››ä¸ªé˜¶æ®µ&lt;/strong>&lt;/h3>
&lt;p>&lt;strong>Phase 0. Leader election&lt;/strong>&lt;/p>
&lt;p>æ‰€æœ‰èŠ‚ç‚¹æœ€å¼€å§‹éƒ½æ˜¯LOOKINGã€‚åªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹å¾—åˆ°è¶…åŠæ•°èŠ‚ç‚¹çš„ç¥¨æ•°ï¼Œå®ƒå°±å¯ä»¥å½“é€‰å‡† leaderã€‚åªæœ‰åˆ°è¾¾ Phase 3 å‡† leader æ‰ä¼šæˆä¸ºçœŸæ­£çš„ leaderã€‚è¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯å°±æ˜¯ä¸ºäº†é€‰å‡ºä¸€ä¸ªå‡† leaderï¼Œç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚&lt;/p>
&lt;p>åè®®å¹¶æ²¡æœ‰è§„å®šè¯¦ç»†çš„é€‰ä¸¾ç®—æ³•ã€‚&lt;/p>
&lt;p>&lt;strong>Phase 1. Discovery&lt;/strong>&lt;/p>
&lt;p>è¿™ä¸ªé˜¶æ®µæœ‰ä¸¤ä¸ªå·¥ä½œ&lt;/p>
&lt;ol>
&lt;li>è·å–æ‰€æœ‰followerçš„lastZxidç¡®å®šå½“å‰é›†ç¾¤ä¸­æœ‰å“ªä¸ªèŠ‚ç‚¹æ‹¥æœ‰æœ€æ–°æ•°æ®&lt;/li>
&lt;li>ä»æ‰€æœ‰followerçš„currentEpochä¸­é€‰å‡ºä¸€ä¸ªæœ€å¤§çš„ç„¶åè‡ªå¢1å¾—åˆ°peerEpochï¼Œå¹¶å‘ç»™æ‰€æœ‰followerï¼Œfollowerä¼šå°†è‡ªå·±çš„acceptEpochè®¾ç½®ä¸ºpeerEpochï¼Œæ‹’ç»ä¸€åˆ‡å°äºè¯¥epochçš„è¯·æ±‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Phase 2. Synchronization&lt;/strong>&lt;/p>
&lt;p>è¿™ä¸ªé˜¶æ®µå°±æ˜¯æ ¹æ®Discoveryé˜¶æ®µæ‰¾åˆ°çš„æœ€æ–°æ•°æ®èŠ‚ç‚¹ï¼Œleaderä¼šä¸å…¶åŒæ­¥ã€‚&lt;/p>
&lt;p>&lt;strong>è¿™é‡Œå‘ç”Ÿäº†followeråˆ°leaderçš„æ•°æ®åŒæ­¥ï¼Œè¿™æ˜¯å’Œzookeeperçš„å®ç°è¿˜æœ‰raftçš„å®ç°æ˜¯ä¸ä¸€æ ·çš„&lt;/strong>&lt;/p>
&lt;p>åŒæ­¥å®Œæˆåï¼Œä¼šå‘æ‰€æœ‰followeråŒæ­¥æ•°æ®ï¼Œåªæœ‰å½“quorumçš„followeréƒ½å®Œæˆäº†æ•°æ®åŒæ­¥åï¼Œå…¶å½“é€‰ä¸ºæ–°çš„leaderã€‚&lt;/p>
&lt;p>&lt;strong>Phase 3 . Broadcast&lt;/strong>&lt;/p>
&lt;p>åˆ°äº†è¿™ä¸ªé˜¶æ®µï¼Œ leaderæ‰èƒ½å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œæ¶ˆæ¯å¹¿æ’­ã€‚æ•°æ®åŒæ­¥çš„è¿‡ç¨‹ç±»ä¼¼ä¸€ä¸ª2PCï¼ŒLeaderå°†clientå‘è¿‡æ¥çš„è¯·æ±‚ç”Ÿæˆä¸€ä¸ªäº‹åŠ¡proposalï¼Œç„¶åå‘é€ç»™Followerï¼Œå¤šæ•°Followeråº”ç­”ä¹‹åï¼ŒLeaderå†å‘é€Commitç»™å…¨éƒ¨çš„Followerè®©å…¶è¿›è¡Œæäº¤ã€‚&lt;/p>
&lt;h3 id="zookeeperçš„å®ç°">&lt;strong>Zookeeperçš„å®ç°&lt;/strong>&lt;/h3>
&lt;p>&lt;strong>Phase 0. Fast Leader Election&lt;/strong>&lt;/p>
&lt;p>è¿™ä¸ªé˜¶æ®µç›¸å½“äºæ˜¯ç†è®ºå®ç°ä¸­çš„Phase 0ï¼ŒPhase 1çš„æ•´åˆã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸æ–­æ›´æ–°è‡ªå·±çš„ç¥¨ç®±ï¼Œæœ€ç»ˆèƒ½å¤Ÿæ‰¾åˆ°lastZxidæœ€å¤§çš„èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶æ¨é€‰ä¸ºleaderã€‚&lt;/p>
&lt;p>è¿™æ ·çš„å®ç°ä¹Ÿé¿å…äº†syncçš„æ—¶å€™éœ€è¦ä»followerå‘leaderåŒæ­¥æ•°æ®ã€‚&lt;/p>
&lt;p>æˆä¸ºleaderçš„æ¡ä»¶&lt;/p>
&lt;ul>
&lt;li>epochæœ€å¤§&lt;/li>
&lt;li>zxidæœ€å¤§&lt;/li>
&lt;li>server idæœ€å¤§&lt;/li>
&lt;/ul>
&lt;p>èŠ‚ç‚¹åœ¨é€‰ä¸¾å¼€å§‹éƒ½é»˜è®¤æŠ•ç¥¨ç»™è‡ªå·±ï¼Œå½“æ¥æ”¶å…¶ä»–èŠ‚ç‚¹çš„é€‰ç¥¨æ—¶ï¼Œä¼šæ ¹æ®ä¸Šé¢çš„æ¡ä»¶æ›´æ”¹è‡ªå·±çš„é€‰ç¥¨å¹¶é‡æ–°å‘é€é€‰ç¥¨ç»™å…¶ä»–èŠ‚ç‚¹ï¼Œå½“æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„å¾—ç¥¨è¶…è¿‡åŠæ•°ï¼Œè¯¥èŠ‚ç‚¹ä¼šè®¾ç½®è‡ªå·±çš„çŠ¶æ€ä¸º leadingï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šè®¾ç½®è‡ªå·±çš„çŠ¶æ€ä¸º followingã€‚&lt;/p>
&lt;p>&lt;strong>Phase 1. Recovery&lt;/strong>&lt;/p>
&lt;p>è¿™ä¸ªé˜¶æ®µæ‰€æœ‰çš„followeréƒ½ä¼šå‘é€è‡ªå·±çš„lastZxidåˆ°leaderã€‚&lt;/p>
&lt;p>Leaderä¼šæ ¹æ®followerçš„lastZxidå’Œè‡ªå·±çš„lastZxidè¿›è¡Œæ¯”è¾ƒï¼Œåšå‡ºå¦‚ä¸‹ä¸‰ç§å¯èƒ½çš„åŒæ­¥ç­–ç•¥ï¼š&lt;/p>
&lt;ol>
&lt;li>SNAPï¼šå¦‚æœfolloweræ•°æ®å¤ªè€ï¼Œå·²ç»å°äºminCommitLogåˆ™é‡‡å–å¿«ç…§åŒæ­¥&lt;/li>
&lt;li>DIFFï¼šå¦‚æœfollowerçš„lastZxid å¤„äºminCommitLogå’ŒmaxCommitLogä¹‹é—´ï¼Œåˆ™é‡‡å–å¢é‡åŒæ­¥F.lastZxid-L.lastZxidä¹‹é—´çš„æ•°æ®&lt;/li>
&lt;li>TRUNCï¼šå½“F.lastZxidæ¯”L.lastZxidå¤§æ—¶ï¼ŒLeaderä¼šè®©followeråˆ é™¤æ‰€æœ‰å¯¹äºçš„æ•°æ®&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Phase 2. Broadcast&lt;/strong>&lt;/p>
&lt;p>åŒç†è®ºå®ç°&lt;/p>
&lt;h2 id="raft">&lt;strong>Raft&lt;/strong>&lt;/h2>
&lt;h3 id="raftèŠ‚ç‚¹çŠ¶æ€">&lt;strong>RaftèŠ‚ç‚¹çŠ¶æ€ï¼š&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>FOLLOWER&lt;/li>
&lt;li>CANDIDATE&lt;/li>
&lt;li>LEADER&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>è§¦å‘Leaderé€‰ä¸¾æ—¶æœº&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>å½“æ•´ä¸ªé›†ç¾¤åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯Followerï¼Œæ­¤æ—¶ç­‰åˆ°è¶…æ—¶çš„èŠ‚ç‚¹ä¼šè½¬å˜ä¸ºCandidateå‘èµ·RequestVoteRPCå‘èµ·é€‰ä¸¾&lt;/li>
&lt;li>å½“leader downæ‰åï¼Œç”±äºä¸å†æœ‰AppendEntriesRPCæ¥ç»´æŒå¿ƒè·³ï¼Œfollowerä¹Ÿä¼šå‘ç”Ÿè¶…æ—¶ï¼Œå¼€å§‹é€‰ä¸¾&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Leader Election&lt;/strong>&lt;/p>
&lt;p>å½“Follower/Candidateå‘ç”Ÿè¶…æ—¶&lt;/p>
&lt;ol>
&lt;li>é¦–å…ˆå°†è‡ªå·±çš„Termè‡ªå¢1&lt;/li>
&lt;li>ç„¶åæŠ•ç¥¨ç»™è‡ªå·±&lt;/li>
&lt;li>ä¼šå‘é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å‘é€RequestVoteRPC&lt;/li>
&lt;/ol>
&lt;p>å½“æ”¶åˆ°majorityçš„é€‰ç¥¨åï¼Œè‡ªå·±ä¼šè½¬å˜ä¸ºLeaderï¼Œæ­¤æ—¶ä¼šå¼€å§‹å‘æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹å‘é€AppendEntriesRPCã€‚&lt;/p>
&lt;p>FolloweræŠ•ç¥¨çš„æ¡ä»¶ï¼š&lt;/p>
&lt;ol>
&lt;li>Candidateçš„Termæ¯”è‡ªèº«çš„Termå¤§&lt;/li>
&lt;li>å¦‚æœTermä¸€æ ·ï¼Œé‚£ä¹ˆå°±éœ€è¦candidateçš„last log indexæ¯”è‡ªå·±çš„å¤§&lt;/li>
&lt;/ol>
&lt;p>é€šè¿‡ä¸Šè¿°æ¡ä»¶é€‰å‡ºæ¥çš„leaderèƒ½å¤Ÿä¿è¯ä¼šæ‹¥æœ‰æ‰€æœ‰å·²ç»æäº¤çš„entry&lt;/p>
&lt;p>&lt;strong>Log Replication&lt;/strong>&lt;/p>
&lt;p>é€‰ä¸¾å®Œæˆåï¼š&lt;/p>
&lt;ol>
&lt;li>å½“ä¸€ä¸ªèŠ‚ç‚¹æˆä¸ºleaderåä¼šåˆå§‹åŒ–ä¸¤ä¸ªæ•°ç»„
&lt;ol>
&lt;li>nextIndexï¼Œè®°å½•æ‰€æœ‰followerçš„ä¸‹ä¸€ä¸ªæ—¥å¿—indexï¼Œåˆå§‹å€¼ä¸ºleaderçš„last log index&lt;/li>
&lt;li>matchIndexï¼Œè®°å½•æ‰€æœ‰followerå·²ç»ç¡®å®šå®ŒæˆåŒæ­¥çš„æ—¥å¿—index&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>ç„¶åé€šè¿‡AppendEntriesRPCå®Œæˆæ•°æ®åŒæ­¥ï¼š
&lt;ol>
&lt;li>prevLogIndexï¼šè®°å½•ä¸Šä¸€æ¡æ—¥å¿—index&lt;/li>
&lt;li>prevLogTermï¼šè®°å½•ä¸Šä¸€æ¡æ—¥å¿—Term&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>åªè¦followerå‘ç°æ²¡æœ‰ä¸€ä¸ªä¸‹æ ‡ä¸ºprevLogIndexå¹¶ä¸”termä¸ºprevLogTermçš„entryéƒ½ä¼šè¿”å›falseï¼Œleaderä¾¿ä¼šæŠŠå…¶å¯¹åº”çš„nextIndexå‡ä¸€ï¼Œä¸€ç›´é‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°ä¸¤è€…matchï¼Œå¹¶æ›´æ–°matchIndex&lt;/li>
&lt;li>åç»­AppendEntriesRPCä¾¿ä¼šé€æ¸å°†Followerçš„æ—¥å¿—è¡¥é½&lt;/li>
&lt;/ol>
&lt;p>å¤„ç†å®¢æˆ·ç«¯å‘½ä»¤ï¼š&lt;/p>
&lt;ol>
&lt;li>Leaderå¤„ç†è¯»ï¼Œæ¯ä¸ªentryåªæœ‰appendåˆ°å¤§å¤šæ•°èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸»èŠ‚ç‚¹æ‰è§†ä¸ºcommitï¼Œå¹¶ä¸”æ›´æ–°commitIdexï¼Œéšåè¿™ä¸ªcommitIndexä¼šè¢«AppendEntriesRPCé€æ¸åŒæ­¥åˆ°Follower&lt;/li>
&lt;li>æ‰€æœ‰èŠ‚ç‚¹ï¼Œåªè¦å‘ç°commitIndex&amp;gt;lastAppliedéƒ½ä¼šå°†entryæäº¤åˆ°çŠ¶æ€æœº&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Log Compaction&lt;/strong>&lt;/p>
&lt;p>ç”±äºå†…å­˜æ˜¯æœ‰é™çš„ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä¼šå®šæœŸå¯¹ç¼“å­˜çš„logè¿›è¡Œcompactç”Ÿæˆsnapshotï¼Œå¯¹äºè¿œè¿œè½åçš„followerï¼Œä¸»èŠ‚ç‚¹ä¼šå‘é€InstallSnapshotRPCç»™follower,è¿™ä¸ªè¿‡ç¨‹æ˜¯åˆ†æˆä¸€ä¸ªä¸ªchunkæ¥å®Œæˆçš„&lt;/p>
&lt;h3 id="ä¸¤è€…ä¸åŒç‚¹">&lt;strong>ä¸¤è€…ä¸åŒç‚¹&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>è§¦å‘é€‰ä¸¾æ–¹å¼ä¸åŒ
&lt;ul>
&lt;li>raft followerè¶…æ—¶+prevoteé¿å…termæ— é™é€’å¢&lt;/li>
&lt;li>zab followerè¶…æ—¶+leaderå‘ç°å¤§å¤šæ•°followerè¶…æ—¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é€‰ä¸¾æœºåˆ¶ä¸åŒ
&lt;ul>
&lt;li>raftæ¯ä¸ªtermåªä¼šæŠ•ä¸€ç¥¨ï¼Œå­˜åœ¨split voteå¯èƒ½æ€§&lt;/li>
&lt;li>zabæ¯ä¸ªepochä¼šä¸æ–­æ›´æ–°é€‰ç¥¨ï¼Œæ—¶é—´ç†è®ºä¸Šç›¸å¯¹Raftè¦èŠ±è´¹çš„å¤šã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ—¥å¿—åŒæ­¥æœºåˆ¶ä¸åŒï¼Œå¹¶ä¸”å¯¹æœªæäº¤æ—¥å¿—çš„å¤„ç†æ–¹å¼ä¸åŒ
&lt;ul>
&lt;li>Raftä¸­leaderæ˜¯æ ¹æ®AppendEntriesRPCçš„nextIndexï¼ŒprevLogIndexï¼ŒprevLogTermæ¥è·Ÿè¸ªfollowerçš„åŒæ­¥æƒ…å†µï¼Œå¹¶å®ç°é€æ­¥çš„åŒæ­¥ï¼ŒæœŸé—´æœ‰ä¸ªelection restrictionï¼Œé™åˆ¶termåªèƒ½commitå±äºtermçš„entryï¼Œæ—§termçš„entryåªèƒ½è¢«å½“å‰termçš„commitç»™é™„å¸¦commitã€‚æ‰€ä»¥raftä¸­æœªæäº¤çš„æ—¥å¿—å¯èƒ½æäº¤ä¹Ÿå¯èƒ½ä¼šè¢«è¦†ç›–&lt;/li>
&lt;li>ZABåœ¨é€‰ä¸»åï¼Œæœ‰ä¸€ä¸ªRecoveryé˜¶æ®µï¼Œæ ¹æ®æ¯ä¸ªèŠ‚ç‚¹çš„lastZxidæ¥åˆ¤æ–­æ—¥å¿—çš„å–èˆï¼Œåœ¨leaderä¸Šæ‰€æœ‰æ²¡æœ‰commitçš„æ—¥å¿—éƒ½ä¼šæäº¤ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ®‹ç•™æ—¥å¿—å¤„ç†
&lt;ul>
&lt;li>Raftï¼šå¯¹äºä¹‹å‰termçš„è¿‡åŠæˆ–æœªè¿‡åŠå¤åˆ¶çš„æ—¥å¿—é‡‡å–çš„æ˜¯ä¿å®ˆçš„ç­–ç•¥ï¼Œå…¨éƒ¨åˆ¤å®šä¸ºæœªæäº¤ï¼Œåªæœ‰å½“å½“å‰termçš„æ—¥å¿—è¿‡åŠäº†ï¼Œæ‰ä¼šé¡ºä¾¿å°†ä¹‹å‰termçš„æ—¥å¿—è¿›è¡Œæäº¤&lt;/li>
&lt;li>ZooKeeperï¼šé‡‡å–æ¿€è¿›çš„ç­–ç•¥ï¼Œå¯¹äºæ‰€æœ‰è¿‡åŠè¿˜æ˜¯æœªè¿‡åŠçš„æ—¥å¿—éƒ½åˆ¤å®šä¸ºæäº¤ï¼Œéƒ½å°†å…¶åº”ç”¨åˆ°çŠ¶æ€æœºä¸­&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
- https://ngtrio.com/posts/raft%E4%B8%8Ezab%E5%AF%B9%E6%AF%94/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item><item><title>Scalaéšå¼è½¬æ¢çš„ç†è§£</title><link>https://ngtrio.com/posts/scala%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2%E7%9A%84%E7%90%86%E8%A7%A3/</link><pubDate>Fri, 09 Jul 2021 09:29:32 +0800</pubDate><guid>https://ngtrio.com/posts/scala%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2%E7%9A%84%E7%90%86%E8%A7%A3/</guid><description>æ˜Ÿæ²³é¹­èµ· https://ngtrio.com/posts/scala%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2%E7%9A%84%E7%90%86%E8%A7%A3/ -&lt;h3 id="å°†éšå¼è§£æçœ‹ä½œæ˜¯æ–¹æ³•è°ƒç”¨">å°†éšå¼è§£æçœ‹ä½œæ˜¯æ–¹æ³•è°ƒç”¨&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>éšå¼å‚æ•°&lt;/p>
&lt;p>ImplicitValue: Unit =&amp;gt; RequiredType&lt;/p>
&lt;/li>
&lt;li>
&lt;p>éšå¼è½¬æ¢&lt;/p>
&lt;p>ImplicitValue: GivenType =&amp;gt; RequiredType.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨æ–¹æ³•æ²¡æœ‰è¢«å®šä¹‰çš„ç±»å‹ä¸Šè°ƒç”¨æ–¹æ³•&lt;/p>
&lt;p>ImplicitValue: GivenType =&amp;gt; ???&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="éšå¼èŒƒå›´implicit-scopeå®šä¹‰">éšå¼èŒƒå›´ï¼ˆimplicit scopeï¼‰å®šä¹‰&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>Current scope&lt;/p>
&lt;ul>
&lt;li>Local scope&lt;/li>
&lt;li>Current Scope defined by Imports (Explicit Imports and Wildcard Imports)&lt;/li>
&lt;/ul>
&lt;p>ç®€å•çš„è¯´å°±æ˜¯å’Œå˜é‡ã€æ ‡è¯†ç¬¦ç­‰çš„æœç´¢scopeæ˜¯ä¸€æ ·çš„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Associated Type&lt;/p>
&lt;ul>
&lt;li>Function0[RequiredType]&lt;/li>
&lt;li>Function1[GivenType, RequireType]&lt;/li>
&lt;li>Function1[GivenType, ???]&lt;/li>
&lt;/ul>
&lt;p>éšå¼èŒƒå›´åŒ…æ‹¬ä¸Šè¿°æ¶‰åŠåˆ°çš„ç±»å‹çš„ä¼´ç”Ÿå¯¹è±¡ï¼Œå¦‚æœè¯´ä¸Šè¿°ç±»å‹æ˜¯ç±»å‹æ„é€ å™¨ï¼Œæ¯”å¦‚è¯´RequiredType[T]ï¼Œé‚£ä¹ˆTçš„éšå¼èŒƒå›´åŒæ ·ä¼šè¢«æœç´¢ã€‚GivenType, RequireTypeçš„çˆ¶ç±»/traitï¼ˆå¦‚æœæœ‰ï¼‰çš„ä¼´ç”Ÿå¯¹è±¡åŒæ ·ä¹Ÿä¼šè¢«æœç´¢ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>å‚è€ƒï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.geekabyte.io/2017/12/implicit-scope-and-implicit-resolution.html">https://www.geekabyte.io/2017/12/implicit-scope-and-implicit-resolution.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
- https://ngtrio.com/posts/scala%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2%E7%9A%84%E7%90%86%E8%A7%A3/ - ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</description></item></channel></rss>