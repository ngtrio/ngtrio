<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Go on æ˜Ÿæ²³é¹­èµ·</title><link>http://ngtrio.com/tags/go/</link><description>Recent content in Go on æ˜Ÿæ²³é¹­èµ·</description><generator>Hugo</generator><language>en-us</language><copyright>ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</copyright><lastBuildDate>Sun, 17 Apr 2022 23:09:41 +0800</lastBuildDate><atom:link href="http://ngtrio.com/tags/go/index.xml" rel="self" type="application/rss+xml"/><item><title>Go Generics</title><link>http://ngtrio.com/posts/go-genric/</link><pubDate>Sun, 17 Apr 2022 23:09:41 +0800</pubDate><guid>http://ngtrio.com/posts/go-genric/</guid><description>&lt;p>&lt;img src="images/2022-04-17-15-22-16.png" alt="">&lt;/p>
&lt;ul>
&lt;li>Generics&lt;/li>
&lt;li>Fuzzing&lt;/li>
&lt;li>Workspaces&lt;/li>
&lt;li>20% Performance Improvements&lt;/li>
&lt;/ul>
&lt;p>æœ¬æ–‡æ˜¯å¯¹Go1.18çš„ç¬¬ä¸€ä¸ªç‰¹æ€§ï¼šæ³›å‹ï¼ˆGenericsï¼‰åšçš„ä¸€äº›ä½“éªŒæ€»ç»“ã€‚&lt;/p>
&lt;h2 id="ä»å¸¸è§çš„åœºæ™¯è¯´èµ·">ä»å¸¸è§çš„åœºæ™¯è¯´èµ·&lt;/h2>
&lt;h3 id="å¯¹æŒ‡é’ˆç±»å‹è¿›è¡Œè§£å¼•ç”¨">å¯¹æŒ‡é’ˆç±»å‹è¿›è¡Œè§£å¼•ç”¨&lt;/h3>
&lt;p>ä¸€èˆ¬æˆ‘ä»¬ä¼šåƒä¸‹é¢è¿™æ ·å¯¹ä¸åŒçš„ç±»å‹åˆ†åˆ«å®ç°å¯¹åº”çš„è§£å¼•ç”¨å‡½æ•°ï¼ˆä¸ä½¿ç”¨åå°„çš„æƒ…å†µä¸‹ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">PtrToString&lt;/span>(strPtr *&lt;span style="color:#00688b;font-weight:bold">string&lt;/span>) &lt;span style="color:#00688b;font-weight:bold">string&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> strPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#cd5555">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *strPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">PtrToInt&lt;/span>(intPtr *&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>) &lt;span style="color:#00688b;font-weight:bold">int&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> intPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#b452cd">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *intPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">PtrToBool&lt;/span>(boolPtr *&lt;span style="color:#00688b;font-weight:bold">bool&lt;/span>) &lt;span style="color:#00688b;font-weight:bold">bool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> boolPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> &lt;span style="color:#8b008b;font-weight:bold">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *boolPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¯æ–°å¢ä¸€ä¸ªç±»å‹æˆ‘ä»¬å°±éœ€è¦é’ˆå¯¹è¿™ä¸ªç±»å‹å®ç°ä¸€æ®µç±»ä¼¼é‡å¤çš„ä»£ç ï¼Œä½†è¿™äº›å‡½æ•°çš„å”¯ä¸€ä¸åŒç‚¹ï¼Œ&lt;strong>å®é™…ä¸Šåªæœ‰å‡½æ•°å‚æ•°çš„ç±»å‹å’Œå‡½æ•°å“åº”å€¼çš„ç±»å‹ä¸åŒ&lt;/strong>ã€‚&lt;/p>
&lt;p>è€Œ &lt;strong>æ³›å‹(Generics)&lt;/strong> å°±æ˜¯ç»™å˜é‡çš„ç±»å‹ä¹Ÿå¼•å…¥â€œå½¢å‚&amp;amp;å®å‚â€çš„æ¦‚å¿µã€‚æˆ‘ä»¬å®šä¹‰å‡½æ•°çš„æ—¶å€™å¯ä»¥ç»™å‚æ•°ç±»å‹å®šä¹‰â€œç±»å‹å½¢å‚â€ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡½æ•°ä¼ å…¥ç±»å‹çš„å®å‚ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ³›å‹ï¼Œä¸Šè¿°çš„ä»£ç å®ç°å¯ä»¥è½¬å˜ä¸ºä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#228b22">// å®šä¹‰è§£å¼•ç”¨å‡½æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> FromPtr[T &lt;span style="color:#00688b;font-weight:bold">any&lt;/span>](anyPtr *T) T {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#8b008b;font-weight:bold">var&lt;/span> zero T
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> anyPtr == &lt;span style="color:#8b008b;font-weight:bold">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span>		&lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> zero
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> *anyPtr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äºä¸åŒçš„ç±»å‹ï¼Œæˆ‘ä»¬éƒ½åªéœ€è¦è°ƒç”¨è¿™ä¸€ä¸ª&lt;code>æ³›å‹å‡½æ•°&lt;/code>å³å¯ã€‚&lt;/p></description></item><item><title>OpenWRTè·‘Goå®šæ—¶ä»»åŠ¡</title><link>http://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</link><pubDate>Sun, 23 Jan 2022 10:48:19 +0800</pubDate><guid>http://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</guid><description>&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>å› ä¸ºå‰æ®µæ—¶é—´ä¸ºäº†åšä¸€ä¸ªå…¨å±€çš„ğŸªœï¼Œäºæ˜¯æŠŠå®¶é‡Œçš„è·¯ç”±å™¨åˆ·äº†ä¸€ä¸ªOpenWRTï¼Œå°½ç®¡è·¯ç”±å™¨æ€§èƒ½æ¯”è¾ƒæ‹‰èƒ¯ï¼Œä½†æ˜¯æ¶èµ·äº†ğŸªœåï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„é—ªå­˜ç©ºé—´ä»¥åŠå†…å­˜ç©ºé—´ï¼Œæœ€è¿‘æƒ³æŠŠè¿™ç‚¹ç©ºé—´ä¹Ÿç»™åˆ©ç”¨ä¸Šï¼Œ&lt;del>è·¯ç”±å™¨24hå·¥ä½œçš„ç”µè´¹å¾—æ‰¾è¡¥å›æ¥ã€‚&lt;/del> &lt;br>
æƒ³åˆ°ä¹‹å‰å­¦ä¹ Goçš„æ—¶å€™å†™äº†ä¸ªç®€å•çš„TGæœºå™¨äººï¼Œåˆšå¥½æœ€è¿‘æƒ³è·‘å‡ ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œäºæ˜¯å†³å®šæŠŠè¿™ä¸ªæœºå™¨äººæ­å»ºåˆ°è·¯ç”±å™¨ä¸Šã€‚&lt;/p>
&lt;h2 id="äº¤å‰ç¼–è¯‘">äº¤å‰ç¼–è¯‘&lt;/h2>
&lt;p>å› ä¸ºè·¯ç”±å™¨çš„CPUæ¶æ„ä¸ä¸€æ ·ï¼Œæˆ‘è‡ªå·±æœ¬æœºç¼–è¯‘çš„äºŒè¿›åˆ¶è‡ªç„¶æ˜¯æ— æ³•åœ¨è·¯ç”±å™¨ä¸Šè·‘èµ·æ¥çš„ã€‚æ‰€ä»¥éœ€è¦è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œè¿™é‡Œçœ‹åˆ°æˆ‘çš„è·¯ç”±å™¨CPUæ¶æ„æ˜¯&lt;code>mips&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>root@OpenWrt:~# uname -m
mips
&lt;/code>&lt;/pre>&lt;p>&lt;a href="https://go.dev/doc/install/source#environment">GoåŸç”Ÿå°±æ”¯æŒäº¤å‰ç¼–è¯‘&lt;code>mips&lt;/code>æŒ‡ä»¤é›†çš„äºŒè¿›åˆ¶&lt;/a>ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å°±å¾ˆç®€å•äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00688b">GOOS&lt;/span>=linux &lt;span style="color:#00688b">GOARCH&lt;/span>=mipsle &lt;span style="color:#00688b">GOMIPS&lt;/span>=softfloat go build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ—¶åŒºé—®é¢˜">æ—¶åŒºé—®é¢˜&lt;/h2>
&lt;p>æ™šä¸Šå®šæ—¶ä»»åŠ¡å†™å¥½ï¼Œç¼–è¯‘å¥½ï¼Œåœ¨è·¯ç”±å™¨ä¸Šè·‘èµ·æ¥åå°±ç¡è§‰å»äº†ï¼Œä½†æ˜¯ç¬¬äºŒå¤©æ—©ä¸Šä¹ç‚¹å¤šèµ·åºŠå‘ç°æˆ‘çš„tg botå¹¶æ²¡æœ‰æ”¶åˆ°cronä¸º&lt;code>0 0 8 * * ?&lt;/code>çš„å®šæ—¶ä»»åŠ¡æ¶ˆæ¯ã€‚&lt;br>
é¦–å…ˆsshåˆ°è·¯ç”±å™¨ï¼Œå¯ä»¥ç¡®å®šæˆ‘çš„tgbotçš„è¿›ç¨‹å¹¶æ²¡æœ‰æŒ‚æ‰ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¹Ÿæ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œä½†æ˜¯å‘ç°æ—¥å¿—çš„æ—¶é—´éƒ½æ˜¯&lt;code>UTC&lt;/code>æ—¶é—´ï¼Œè¿™å°±æ„å‘³ç€å®šæ—¶ä»»åŠ¡å…¶å®è¿˜æ²¡åˆ°è§¦å‘çš„æ—¶é—´ã€‚&lt;br>
ä½†æ˜¯è®°å¾—ä¹‹å‰æ˜¯åœ¨OpenWRTåå°æ˜¯è®¾ç½®è¿‡&lt;code>UTC+8&lt;/code>æ—¶åŒºçš„ï¼Œå¹¶ä¸”åœ¨è·¯ç”±å™¨çš„shellæ‰§è¡Œ&lt;code>date -R&lt;/code>ä¹Ÿæ˜¾ç¤ºçš„æ˜¯&lt;code>UTC+8&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>root@OpenWrt:/etc# date -R
Sun, 23 Jan 2022 10:56:06 +0800
&lt;/code>&lt;/pre>&lt;p>è€Œæˆ‘ä¹Ÿæ¸…æ¥šè®°å¾—Goçš„time.Format()é»˜è®¤å°±æ˜¯é‡‡ç”¨çš„ç³»ç»Ÿæ—¶åŒºï¼Œè¿™é‡ŒGoæ²¡æœ‰è¯»å–åˆ°å°±æœ‰ç‚¹å¥‡æ€ªäº†ã€‚&lt;br>
äºæ˜¯äº†è§£äº†ä¸‹ç»†èŠ‚ï¼š&lt;/p>
&lt;ol>
&lt;li>OpenWRTåœ¨å“ªé‡Œè®¾ç½®äº†æ—¶åŒº
&lt;ul>
&lt;li>/etc/TZæ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Goä»å“ªé‡Œè·å–ç³»ç»Ÿæ—¶åŒº
&lt;ul>
&lt;li>è¯»å–TZç¯å¢ƒå˜é‡&lt;/li>
&lt;li>è¯»å–/etc/localtimeæ–‡ä»¶&lt;/li>
&lt;li>æœ¬åœ°æ—¶åŒºè¯»å–å¤±è´¥ï¼Œä½¿ç”¨ UTC æ—¶é—´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>é—®é¢˜å°±å¾ˆæ˜¾ç„¶äº†ã€‚&lt;br>
è§£å†³ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>opkg update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install zoneinfo-asia
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a href="https://stackoverflow.com/a/60161561/11571735">Writing and Compiling Program For OpenWrt&lt;/a>&lt;br>
&lt;a href="https://go.dev/doc/install/source#environment">Go environment&lt;/a>&lt;br>
&lt;a href="https://www.imhanjm.com/2017/10/29/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3golang%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86(time.time)/">æ·±å…¥ç†è§£GOæ—¶é—´å¤„ç†(time.Time)&lt;/a>&lt;/p></description></item><item><title>Go Array&amp;Slice</title><link>http://ngtrio.com/posts/go-array-slice/</link><pubDate>Tue, 05 Oct 2021 16:14:16 +0800</pubDate><guid>http://ngtrio.com/posts/go-array-slice/</guid><description>&lt;h2 id="spec">Spec&lt;/h2>
&lt;blockquote>
&lt;p>Array:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>ArrayType = &amp;#34;[&amp;#34; ArrayLength &amp;#34;]&amp;#34; ElementType .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ArrayLength = Expression .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ElementType = Type .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶ä¸­ArrayLengthæ˜¯Arrayç±»å‹çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œä¸”å¿…é¡»èƒ½å¤Ÿè®¡ç®—ä¸ºä¸€ä¸ªéè´Ÿintç±»å‹å¯â€œå¸¸é‡è¡¨ç¤ºï¼ˆ&lt;a href="https://golang.org/ref/spec#Constants">constant&lt;/a> &lt;a href="https://golang.org/ref/spec#Representability">representable&lt;/a>ï¼‰â€çš„å€¼&lt;/p>
&lt;p>Slice:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>SliceType = &amp;#34;[&amp;#34; &amp;#34;]&amp;#34; ElementType .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>ä¸€ä¸ªSliceåªè¦ç»è¿‡äº†åˆå§‹åŒ–ï¼Œå°±å¿…å°†å’Œä¸€ä¸ªåº•å±‚çš„Arrayç»‘å®šï¼Œç»‘å®šåœ¨åŒä¸€ä¸ªArrayä¸Šçš„Slicesä¼šå…±äº«å†…å­˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡makeåˆå§‹åŒ–ä¸€ä¸ªSliceçš„åŒæ—¶ä¼šåˆå§‹åŒ–ä¸€ä¸ªéšå¼çš„Arrayï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#658b00">make&lt;/span>([]&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>, &lt;span style="color:#b452cd">50&lt;/span>, &lt;span style="color:#b452cd">100&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#658b00">new&lt;/span>([&lt;span style="color:#b452cd">100&lt;/span>]&lt;span style="color:#00688b;font-weight:bold">int&lt;/span>)[&lt;span style="color:#b452cd">0&lt;/span>:&lt;span style="color:#b452cd">50&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="arrays">Arrays&lt;/h2>
&lt;p>Golangçš„æ•°ç»„ç±»å‹å’ŒCä¸åŒï¼š&lt;/p>
&lt;ol>
&lt;li>Golangçš„æ•°ç»„æ˜¯å€¼ï¼Œè€Œä¸åƒCæ˜¯æ•°ç»„å¤´æŒ‡é’ˆ&lt;/li>
&lt;li>æ‰€ä»¥ï¼Œåœ¨ç»™ä¸€ä¸ªå‡½æ•°ä¼ æ•°ç»„å‚æ ‘çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ä¼ çš„æ•´ä¸ªæ•°ç»„çš„ä¸€ä»½copy&lt;/li>
&lt;li>æ•°ç»„é•¿åº¦æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥&lt;code>[10]int&lt;/code>å’Œ&lt;code>[20]int&lt;/code>æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»å‹&lt;/li>
&lt;/ol>
&lt;h2 id="slices">Slices&lt;/h2>
&lt;p>å†…éƒ¨è¡¨ç¤ºä¸ºä¸€ä¸ªä¸‰å…ƒç´ ç»“æ„ä½“ï¼š&lt;/p>
&lt;ol>
&lt;li>ptrï¼šæŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ&lt;/li>
&lt;li>lenï¼šSliceé•¿åº¦ï¼Œè¡¨ç¤ºå¼•ç”¨çš„å…ƒç´ ä¸ªæ•°&lt;/li>
&lt;li>capï¼šSliceå®¹é‡ï¼Œä»Sliceå¼•ç”¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°åº•å±‚æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æ•°é‡&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="images/slice-struct.png" alt="img">&lt;/p>
&lt;p>æ¯”å¦‚&lt;code>s := make([]int, 5)&lt;/code>ï¼Œsçš„è¡¨ç¤ºå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="images/slice-1.png" alt="img">&lt;/p>
&lt;p>å¯¹sè¿›è¡Œåˆ‡ç‰‡&lt;code>s = s[2:4]&lt;/code>ï¼Œsçš„è¡¨ç¤ºå˜ä¸ºä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;p>&lt;img src="images/slice-2.png" alt="img">&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥åœ¨capèŒƒå›´å†…è¿›è¡ŒSliceçš„æ‰©å¼ ï¼Œæ¯”å¦‚ï¼š&lt;code>s = s[:cap(s)]&lt;/code>ï¼Œsçš„è¡¨ç¤ºå˜ä¸ºä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;p>&lt;img src="images/slice-3.png" alt="img">&lt;/p>
&lt;p>è¶…è¿‡capä»¥åŠè®¿é—®åº•å±‚æ•°ç»„ä¸­å¤„äºSliceæ›´å‰çš„å…ƒç´ éƒ½æ˜¯&lt;strong>ä¸è¢«å…è®¸çš„&lt;/strong>&lt;/p>
&lt;h4 id="æ‰©å®¹">&lt;strong>æ‰©å®¹&lt;/strong>&lt;/h4>
&lt;p>å½“å‘Sliceä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™å‘ç°åº•å±‚Arrayçš„å®¹é‡å·²ç»ä¸å¤Ÿåˆ™ä¼šè§¦å‘æ‰©å®¹ï¼Œåº•å±‚Arrayå°†å‘ç”Ÿå†…å­˜é‡åˆ†é…ã€‚ä¸ºäº†å‡å°‘å†…å­˜åˆ†é…æ“ä½œï¼Œæˆ‘ä»¬åº”è¯¥åœ¨åˆå§‹åŒ–Sliceçš„æ—¶å€™å°½é‡ç»™å‡ºä¸€ä¸ªé¢„æœŸçš„capå¤§å°ã€‚&lt;/p>
&lt;p>æ‰©å®¹é€»è¾‘ç±»ä¼¼ä¸ä¸‹é¢è¿™æ®µä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8b008b;font-weight:bold">func&lt;/span> &lt;span style="color:#008b45">Append&lt;/span>(slice, data []&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span>) []&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> l := &lt;span style="color:#658b00">len&lt;/span>(slice)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">if&lt;/span> l + &lt;span style="color:#658b00">len&lt;/span>(data) &amp;gt; &lt;span style="color:#658b00">cap&lt;/span>(slice) { &lt;span style="color:#228b22">// reallocate&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#228b22">// Allocate double what&amp;#39;s needed, for future growth.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#d6d6c6">&lt;span> newSlice := &lt;span style="color:#658b00">make&lt;/span>([]&lt;span style="color:#00688b;font-weight:bold">byte&lt;/span>, (l+&lt;span style="color:#658b00">len&lt;/span>(data))*&lt;span style="color:#b452cd">2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#228b22">// The copy function is predeclared and works for any slice type.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#658b00">copy&lt;/span>(newSlice, slice)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> slice = newSlice
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> slice = slice[&lt;span style="color:#b452cd">0&lt;/span>:l+&lt;span style="color:#658b00">len&lt;/span>(data)]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#658b00">copy&lt;/span>(slice[l:], data)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8b008b;font-weight:bold">return&lt;/span> slice
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬å¿…é¡»å°†æ‰©å®¹åçš„Sliceè¿”å›ï¼Œå› ä¸ºSliceæœ¬èº«å®é™…ä¸Šè¿˜æ˜¯å€¼ä¼ é€’ï¼ˆåº•å±‚å­—æ®µptrï¼Œlenï¼Œ capï¼‰&lt;/p></description></item></channel></rss>