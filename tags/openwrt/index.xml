<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OpenWRT on æ˜Ÿæ²³é¹­èµ·</title><link>https://ngtrio.com/tags/openwrt/</link><description>Recent content in OpenWRT on æ˜Ÿæ²³é¹­èµ·</description><generator>Hugo</generator><language>en-us</language><copyright>ngtrio. æœ¬ç«™éµå¾ª CC-BY-NC 4.0 åè®®</copyright><lastBuildDate>Sun, 23 Jan 2022 10:48:19 +0800</lastBuildDate><atom:link href="https://ngtrio.com/tags/openwrt/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenWRTè·‘Goå®šæ—¶ä»»åŠ¡</title><link>https://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</link><pubDate>Sun, 23 Jan 2022 10:48:19 +0800</pubDate><guid>https://ngtrio.com/posts/openwrt%E8%B7%91go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</guid><description>&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>å› ä¸ºå‰æ®µæ—¶é—´ä¸ºäº†åšä¸€ä¸ªå…¨å±€çš„ğŸªœï¼Œäºæ˜¯æŠŠå®¶é‡Œçš„è·¯ç”±å™¨åˆ·äº†ä¸€ä¸ªOpenWRTï¼Œå°½ç®¡è·¯ç”±å™¨æ€§èƒ½æ¯”è¾ƒæ‹‰èƒ¯ï¼Œä½†æ˜¯æ¶èµ·äº†ğŸªœåï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„é—ªå­˜ç©ºé—´ä»¥åŠå†…å­˜ç©ºé—´ï¼Œæœ€è¿‘æƒ³æŠŠè¿™ç‚¹ç©ºé—´ä¹Ÿç»™åˆ©ç”¨ä¸Šï¼Œ&lt;del>è·¯ç”±å™¨24hå·¥ä½œçš„ç”µè´¹å¾—æ‰¾è¡¥å›æ¥ã€‚&lt;/del> &lt;br>
æƒ³åˆ°ä¹‹å‰å­¦ä¹ Goçš„æ—¶å€™å†™äº†ä¸ªç®€å•çš„TGæœºå™¨äººï¼Œåˆšå¥½æœ€è¿‘æƒ³è·‘å‡ ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œäºæ˜¯å†³å®šæŠŠè¿™ä¸ªæœºå™¨äººæ­å»ºåˆ°è·¯ç”±å™¨ä¸Šã€‚&lt;/p>
&lt;h2 id="äº¤å‰ç¼–è¯‘">äº¤å‰ç¼–è¯‘&lt;/h2>
&lt;p>å› ä¸ºè·¯ç”±å™¨çš„CPUæ¶æ„ä¸ä¸€æ ·ï¼Œæˆ‘è‡ªå·±æœ¬æœºç¼–è¯‘çš„äºŒè¿›åˆ¶è‡ªç„¶æ˜¯æ— æ³•åœ¨è·¯ç”±å™¨ä¸Šè·‘èµ·æ¥çš„ã€‚æ‰€ä»¥éœ€è¦è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œè¿™é‡Œçœ‹åˆ°æˆ‘çš„è·¯ç”±å™¨CPUæ¶æ„æ˜¯&lt;code>mips&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>root@OpenWrt:~# uname -m
mips
&lt;/code>&lt;/pre>&lt;p>&lt;a href="https://go.dev/doc/install/source#environment">GoåŸç”Ÿå°±æ”¯æŒäº¤å‰ç¼–è¯‘&lt;code>mips&lt;/code>æŒ‡ä»¤é›†çš„äºŒè¿›åˆ¶&lt;/a>ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å°±å¾ˆç®€å•äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00688b">GOOS&lt;/span>=linux &lt;span style="color:#00688b">GOARCH&lt;/span>=mipsle &lt;span style="color:#00688b">GOMIPS&lt;/span>=softfloat go build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ—¶åŒºé—®é¢˜">æ—¶åŒºé—®é¢˜&lt;/h2>
&lt;p>æ™šä¸Šå®šæ—¶ä»»åŠ¡å†™å¥½ï¼Œç¼–è¯‘å¥½ï¼Œåœ¨è·¯ç”±å™¨ä¸Šè·‘èµ·æ¥åå°±ç¡è§‰å»äº†ï¼Œä½†æ˜¯ç¬¬äºŒå¤©æ—©ä¸Šä¹ç‚¹å¤šèµ·åºŠå‘ç°æˆ‘çš„tg botå¹¶æ²¡æœ‰æ”¶åˆ°cronä¸º&lt;code>0 0 8 * * ?&lt;/code>çš„å®šæ—¶ä»»åŠ¡æ¶ˆæ¯ã€‚&lt;br>
é¦–å…ˆsshåˆ°è·¯ç”±å™¨ï¼Œå¯ä»¥ç¡®å®šæˆ‘çš„tgbotçš„è¿›ç¨‹å¹¶æ²¡æœ‰æŒ‚æ‰ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¹Ÿæ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œä½†æ˜¯å‘ç°æ—¥å¿—çš„æ—¶é—´éƒ½æ˜¯&lt;code>UTC&lt;/code>æ—¶é—´ï¼Œè¿™å°±æ„å‘³ç€å®šæ—¶ä»»åŠ¡å…¶å®è¿˜æ²¡åˆ°è§¦å‘çš„æ—¶é—´ã€‚&lt;br>
ä½†æ˜¯è®°å¾—ä¹‹å‰æ˜¯åœ¨OpenWRTåå°æ˜¯è®¾ç½®è¿‡&lt;code>UTC+8&lt;/code>æ—¶åŒºçš„ï¼Œå¹¶ä¸”åœ¨è·¯ç”±å™¨çš„shellæ‰§è¡Œ&lt;code>date -R&lt;/code>ä¹Ÿæ˜¾ç¤ºçš„æ˜¯&lt;code>UTC+8&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>root@OpenWrt:/etc# date -R
Sun, 23 Jan 2022 10:56:06 +0800
&lt;/code>&lt;/pre>&lt;p>è€Œæˆ‘ä¹Ÿæ¸…æ¥šè®°å¾—Goçš„time.Format()é»˜è®¤å°±æ˜¯é‡‡ç”¨çš„ç³»ç»Ÿæ—¶åŒºï¼Œè¿™é‡ŒGoæ²¡æœ‰è¯»å–åˆ°å°±æœ‰ç‚¹å¥‡æ€ªäº†ã€‚&lt;br>
äºæ˜¯äº†è§£äº†ä¸‹ç»†èŠ‚ï¼š&lt;/p>
&lt;ol>
&lt;li>OpenWRTåœ¨å“ªé‡Œè®¾ç½®äº†æ—¶åŒº
&lt;ul>
&lt;li>/etc/TZæ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Goä»å“ªé‡Œè·å–ç³»ç»Ÿæ—¶åŒº
&lt;ul>
&lt;li>è¯»å–TZç¯å¢ƒå˜é‡&lt;/li>
&lt;li>è¯»å–/etc/localtimeæ–‡ä»¶&lt;/li>
&lt;li>æœ¬åœ°æ—¶åŒºè¯»å–å¤±è´¥ï¼Œä½¿ç”¨ UTC æ—¶é—´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>é—®é¢˜å°±å¾ˆæ˜¾ç„¶äº†ã€‚&lt;br>
è§£å†³ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>opkg update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install zoneinfo-asia
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a href="https://stackoverflow.com/a/60161561/11571735">Writing and Compiling Program For OpenWrt&lt;/a>&lt;br>
&lt;a href="https://go.dev/doc/install/source#environment">Go environment&lt;/a>&lt;br>
&lt;a href="https://www.imhanjm.com/2017/10/29/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3golang%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86(time.time)/">æ·±å…¥ç†è§£GOæ—¶é—´å¤„ç†(time.Time)&lt;/a>&lt;/p></description></item></channel></rss>